<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nilorea Library: n_str.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nilorea Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('n__str_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">n_str.c</div></div>
</div><!--header-->
<div class="contents">
<a href="n__str_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><span class="lineno">    1</span><span class="comment">/**\file n_str.c</span></div>
<div class="line"><span class="lineno">    2</span><span class="comment"> *  string function</span></div>
<div class="line"><span class="lineno">    3</span><span class="comment"> *  Everything you need to use string is here</span></div>
<div class="line"><span class="lineno">    4</span><span class="comment"> *\author Castagnier Mickael</span></div>
<div class="line"><span class="lineno">    5</span><span class="comment"> *\version 1.0</span></div>
<div class="line"><span class="lineno">    6</span><span class="comment"> *\date 01/04/05</span></div>
<div class="line"><span class="lineno">    7</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno">    8</span> </div>
<div class="line"><span class="lineno">    9</span> </div>
<div class="line"><span class="lineno">   10</span><span class="preprocessor">#</span><span class="preprocessor">ifndef</span> <span class="preprocessor">NO_NSTR</span></div>
<div class="line"><span class="lineno">   11</span> </div>
<div class="line"><span class="lineno">   12</span> </div>
<div class="line"><span class="lineno">   13</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;nilorea/n_common.h&quot;</span></div>
<div class="line"><span class="lineno">   14</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;nilorea/n_log.h&quot;</span></div>
<div class="line"><span class="lineno">   15</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;nilorea/n_str.h&quot;</span></div>
<div class="line"><span class="lineno">   16</span> </div>
<div class="line"><span class="lineno">   17</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">errno</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   18</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">pthread</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   19</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">math</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   20</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">ctype</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   21</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">stdio</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   22</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">string</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   23</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">limits</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   24</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">stdlib</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   25</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">dirent</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span> </div>
<div class="line"><span class="lineno">   28</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> __windows__</div>
<div class="line"><span class="lineno">   29</span><span class="keyword">const</span> <span class="keywordtype">char</span> *strcasestr(<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2)</div>
<div class="line"><span class="lineno">   30</span>{</div>
<div class="line"><span class="lineno">   31</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s1, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">   32</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s2, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>    size_t n = strlen(s2);</div>
<div class="line"><span class="lineno">   35</span>    <span class="keywordflow">while</span>( *s1 )</div>
<div class="line"><span class="lineno">   36</span>    {</div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">if</span>( !strnicmp( s1++, s2,n ) )</div>
<div class="line"><span class="lineno">   38</span>            <span class="keywordflow">return</span> ( s1-1 );</div>
<div class="line"><span class="lineno">   39</span>    }</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">   41</span>}</div>
<div class="line"><span class="lineno">   42</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span><span class="comment">/*!\fn void free_nstr_ptr( void *ptr )</span></div>
<div class="line"><span class="lineno">   46</span><span class="comment"> *\brief Free a N_STR pointer structure</span></div>
<div class="line"><span class="lineno">   47</span><span class="comment"> *\param ptr A N_STR *object to free</span></div>
<div class="line"><span class="lineno">   48</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga0a864a4ce4997389f2e5e2e16c51a30a">   49</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="group___n___s_t_r.html#ga0a864a4ce4997389f2e5e2e16c51a30a">free_nstr_ptr</a>( <span class="keywordtype">void</span> *ptr )</div>
<div class="line"><span class="lineno">   50</span>{</div>
<div class="line"><span class="lineno">   51</span>    N_STR *strptr = (N_STR *)ptr ;</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span>( ptr &amp;&amp; strptr )</div>
<div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( strptr -&gt; data );</div>
<div class="line"><span class="lineno">   55</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( strptr );</div>
<div class="line"><span class="lineno">   56</span>    }</div>
<div class="line"><span class="lineno">   57</span>} <span class="comment">/* free_nstr_ptr( ... ) */</span></div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span><span class="comment">/*!\fn int _free_nstr( N_STR **ptr )</span></div>
<div class="line"><span class="lineno">   62</span><span class="comment"> *\brief Free a N_STR structure and set the pointer to NULL</span></div>
<div class="line"><span class="lineno">   63</span><span class="comment"> *\param ptr A N_STR *object to free</span></div>
<div class="line"><span class="lineno">   64</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">   65</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761">   66</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761">_free_nstr</a>( N_STR **ptr )</div>
<div class="line"><span class="lineno">   67</span>{</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( ptr&amp;&amp;(*ptr), <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( (*ptr) -&gt; data );</div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( (*ptr) );</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno">   74</span>} <span class="comment">/* free_nstr( ... ) */</span></div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span><span class="comment">/*!\fn int free_nstr_nolog( N_STR **ptr )</span></div>
<div class="line"><span class="lineno">   79</span><span class="comment"> *\brief Free a N_STR structure and set the pointer to NULL</span></div>
<div class="line"><span class="lineno">   80</span><span class="comment"> *\param ptr A N_STR *object to free</span></div>
<div class="line"><span class="lineno">   81</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">   82</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gabd313699b10bb56e50c45670e479faa7">   83</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gabd313699b10bb56e50c45670e479faa7">free_nstr_nolog</a>( N_STR **ptr )</div>
<div class="line"><span class="lineno">   84</span>{</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">if</span>( (*ptr) )</div>
<div class="line"><span class="lineno">   87</span>    {</div>
<div class="line"><span class="lineno">   88</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( (*ptr) -&gt; data );</div>
<div class="line"><span class="lineno">   89</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( (*ptr) );</div>
<div class="line"><span class="lineno">   90</span>    }</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno">   93</span>} <span class="comment">/* free_nstr( ... ) */</span></div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span><span class="comment">/*!\fn void free_nstr_ptr_nolog( void *ptr )</span></div>
<div class="line"><span class="lineno">   98</span><span class="comment"> *\brief Free a N_STR pointer structure</span></div>
<div class="line"><span class="lineno">   99</span><span class="comment"> *\param ptr A N_STR *object to free</span></div>
<div class="line"><span class="lineno">  100</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gae1af929354e55057c4f134bce8f5b4d6">  101</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="group___n___s_t_r.html#gae1af929354e55057c4f134bce8f5b4d6">free_nstr_ptr_nolog</a>( <span class="keywordtype">void</span> *ptr )</div>
<div class="line"><span class="lineno">  102</span>{</div>
<div class="line"><span class="lineno">  103</span>    N_STR *strptr = (N_STR *)ptr ;</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">if</span>( strptr )</div>
<div class="line"><span class="lineno">  105</span>    {</div>
<div class="line"><span class="lineno">  106</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( strptr -&gt; data );</div>
<div class="line"><span class="lineno">  107</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a>( strptr );</div>
<div class="line"><span class="lineno">  108</span>    }</div>
<div class="line"><span class="lineno">  109</span>} <span class="comment">/* free_nstr_ptr_nolog( ... ) */</span></div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span><span class="comment">/*!\fn char *trim_nocopy(char *s)</span></div>
<div class="line"><span class="lineno">  114</span><span class="comment"> *\brief trim and zero end the string, WARNING: keep and original pointer to delete the string correctly</span></div>
<div class="line"><span class="lineno">  115</span><span class="comment"> *\param s The string to trim</span></div>
<div class="line"><span class="lineno">  116</span><span class="comment"> *\return the trimmed string or NULL</span></div>
<div class="line"><span class="lineno">  117</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">  118</a></span><span class="keywordtype">char</span> *<a class="code hl_function" href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">trim_nocopy</a>(<span class="keywordtype">char</span> *s)</div>
<div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">if</span>( strlen( s ) == 0 )</div>
<div class="line"><span class="lineno">  123</span>        <span class="keywordflow">return</span> s ;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordtype">char</span> *start = s;</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">/* skip spaces at start */</span></div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">while</span>(*start &amp;&amp; isspace(*start))</div>
<div class="line"><span class="lineno">  129</span>        start++;</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordtype">char</span> *end = s + strlen( s ) - 1 ;</div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">/* iterate over the rest remebering last non-whitespace */</span></div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">while</span>( *end &amp;&amp; isspace( *end) &amp;&amp; end &gt; s )</div>
<div class="line"><span class="lineno">  134</span>    {</div>
<div class="line"><span class="lineno">  135</span>        end --;</div>
<div class="line"><span class="lineno">  136</span>    }</div>
<div class="line"><span class="lineno">  137</span>    end ++ ;</div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">/* write the terminating zero after last non-whitespace */</span></div>
<div class="line"><span class="lineno">  139</span>    *end = 0;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">return</span> start;</div>
<div class="line"><span class="lineno">  142</span>} <span class="comment">/* trim_nocopy */</span></div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span><span class="comment">/*!\fn char *trim(char *s)</span></div>
<div class="line"><span class="lineno">  146</span><span class="comment"> *\brief trim and put a \0 at the end, return new char *</span></div>
<div class="line"><span class="lineno">  147</span><span class="comment"> *\param s The string to trim</span></div>
<div class="line"><span class="lineno">  148</span><span class="comment"> *\return the trimmed string or NULL</span></div>
<div class="line"><span class="lineno">  149</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gae5bb0c43f76b886197ee48679f0e8dbc">  150</a></span><span class="keywordtype">char</span> *<a class="code hl_function" href="group___n___s_t_r.html#gae5bb0c43f76b886197ee48679f0e8dbc">trim</a>(<span class="keywordtype">char</span> *s)</div>
<div class="line"><span class="lineno">  151</span>{</div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">return</span> strdup( <a class="code hl_function" href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">trim_nocopy</a><a class="code hl_function" href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">(</a> s <a class="code hl_function" href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">)</a> );</div>
<div class="line"><span class="lineno">  155</span>} <span class="comment">/* trim_nocopy */</span></div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span><span class="comment">/*!\fn char *nfgets( char *buffer , int size , FILE *stream )</span></div>
<div class="line"><span class="lineno">  160</span><span class="comment"> *\brief try to fgets</span></div>
<div class="line"><span class="lineno">  161</span><span class="comment"> *\param buffer The string where to read the file</span></div>
<div class="line"><span class="lineno">  162</span><span class="comment"> *\param size Size of the string</span></div>
<div class="line"><span class="lineno">  163</span><span class="comment"> *\param stream The file to read</span></div>
<div class="line"><span class="lineno">  164</span><span class="comment"> *\return NULL or the captured string</span></div>
<div class="line"><span class="lineno">  165</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga6aafe2498e23778dc91c8ad08167ff24">  166</a></span><span class="keywordtype">char</span> *<a class="code hl_function" href="group___n___s_t_r.html#ga6aafe2498e23778dc91c8ad08167ff24">nfgets</a>( <span class="keywordtype">char</span> *buffer, NSTRBYTE size, FILE *stream )</div>
<div class="line"><span class="lineno">  167</span>{</div>
<div class="line"><span class="lineno">  168</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( buffer, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  169</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( stream, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    NSTRBYTE it = 0  ;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span>( !fgets( buffer, size, stream ) )</div>
<div class="line"><span class="lineno">  174</span>    {</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span>( it == ( size - 1 ) )</div>
<div class="line"><span class="lineno">  179</span>    {</div>
<div class="line"><span class="lineno">  180</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;buffer %p size %d fully filled by fgets on stream %p&quot;</span>, buffer, size, stream );</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">return</span> buffer ;</div>
<div class="line"><span class="lineno">  184</span>} <span class="comment">/* nfgets(...) */</span></div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span><span class="comment">/*!\fn int empty_nstr( N_STR *nstr )</span></div>
<div class="line"><span class="lineno">  189</span><span class="comment"> *\brief empty a N_STR string</span></div>
<div class="line"><span class="lineno">  190</span><span class="comment"> *\param nstr the N_STR *str string to empty</span></div>
<div class="line"><span class="lineno">  191</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  192</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga7b1c84d10757d1886ed29938f1f65973">  193</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga7b1c84d10757d1886ed29938f1f65973">empty_nstr</a>( N_STR *nstr )</div>
<div class="line"><span class="lineno">  194</span>{</div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( nstr, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( nstr <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    nstr <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> = 0 ;</div>
<div class="line"><span class="lineno">  199</span>    memset( nstr <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, 0, nstr <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> );</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno">  202</span>}</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span><span class="comment">/*!\fn N_STR *new_nstr( NSTRBYTE size )</span></div>
<div class="line"><span class="lineno">  205</span><span class="comment"> *\brief create a new N_STR string</span></div>
<div class="line"><span class="lineno">  206</span><span class="comment"> *\param size Size of the new string. 0 for no allocation.</span></div>
<div class="line"><span class="lineno">  207</span><span class="comment"> *\return A new allocated N_STR or NULL</span></div>
<div class="line"><span class="lineno">  208</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">  209</a></span>N_STR *<a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">new_nstr</a>( NSTRBYTE size )</div>
<div class="line"><span class="lineno">  210</span>{</div>
<div class="line"><span class="lineno">  211</span>    N_STR *str = NULL ;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( str, N_STR, 1 );</div>
<div class="line"><span class="lineno">  214</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    str <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> = 0 ;</div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span>( size &lt;= 0 )</div>
<div class="line"><span class="lineno">  218</span>    {</div>
<div class="line"><span class="lineno">  219</span>        str -&gt; data = NULL ;</div>
<div class="line"><span class="lineno">  220</span>        str <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> = 0 ;</div>
<div class="line"><span class="lineno">  221</span>    }</div>
<div class="line"><span class="lineno">  222</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  223</span>    {</div>
<div class="line"><span class="lineno">  224</span>        <span class="comment">//n_log( LOG_DEBUG , &quot;size: %d&quot; , size );</span></div>
<div class="line"><span class="lineno">  225</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( str -&gt; data, <span class="keywordtype">char</span>, size );</div>
<div class="line"><span class="lineno">  226</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>(str) ; <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  227</span>        str <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> = size  ;</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">return</span> str ;</div>
<div class="line"><span class="lineno">  230</span>} <span class="comment">/* new_nstr(...) */</span></div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span><span class="comment">/*!\fn char_to_nstr_ex( const char *from , NSTRBYTE nboct , N_STR **to )</span></div>
<div class="line"><span class="lineno">  235</span><span class="comment"> *\brief Convert a char into a N_STR, extended version</span></div>
<div class="line"><span class="lineno">  236</span><span class="comment"> *\param from A char *string to convert</span></div>
<div class="line"><span class="lineno">  237</span><span class="comment"> *\param nboct  The size to copy, from 1 octet to nboctet (ustrsizez( from ) )</span></div>
<div class="line"><span class="lineno">  238</span><span class="comment"> *\param to A N_STR pointer who will be Malloced</span></div>
<div class="line"><span class="lineno">  239</span><span class="comment"> *\return True on success, FALSE on failure ( to will be set to NULL )</span></div>
<div class="line"><span class="lineno">  240</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gac4314e9f0ada88300a09d66405d541a8">  241</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gac4314e9f0ada88300a09d66405d541a8">char_to_nstr_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *from, NSTRBYTE nboct, N_STR **to )</div>
<div class="line"><span class="lineno">  242</span>{</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span>( (*to) )</div>
<div class="line"><span class="lineno">  244</span>    {</div>
<div class="line"><span class="lineno">  245</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;destination N_STR **str is not NULL (%p), it contain (%s). You must provide an empty destination.&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> (*to)<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> ((*to)&amp;&amp;(*to)<a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a><a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>)?(*to)<a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a><a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>:<span class="stringliteral">&quot;DATA_IS_NULL&quot;</span> );</div>
<div class="line"><span class="lineno">  246</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Data to copy: %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga55b9404f7bc9d3a3ead2f0103331a87e">_str</a>( from ) );</div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno">  248</span>    };</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    (*to) = <a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">new_nstr</a><a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">(</a> nboct + 1 <a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">)</a>;</div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( to&amp;&amp;(*to), <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">/* added a sizeof( void * ) to add a consistant and secure padding at the end */</span></div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( (*to) <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( (*to) ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    memcpy( (*to) <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, from, nboct );</div>
<div class="line"><span class="lineno">  256</span>    (*to) <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> = nboct ;</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  259</span>} <span class="comment">/* char_to_nstr(...) */</span></div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span><span class="comment">/*!\fn N_STR *char_to_nstr( const char *src )</span></div>
<div class="line"><span class="lineno">  264</span><span class="comment"> *\brief Convert a char into a N_STR, short version</span></div>
<div class="line"><span class="lineno">  265</span><span class="comment"> *\param src A char *string to convert</span></div>
<div class="line"><span class="lineno">  266</span><span class="comment"> *\return A N_STR copy of src or NULL</span></div>
<div class="line"><span class="lineno">  267</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga69e5f2dbf75571a73e5a3332929642a4">  268</a></span>N_STR *<a class="code hl_function" href="group___n___s_t_r.html#ga69e5f2dbf75571a73e5a3332929642a4">char_to_nstr</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *src )</div>
<div class="line"><span class="lineno">  269</span>{</div>
<div class="line"><span class="lineno">  270</span>    N_STR *strptr = NULL ;</div>
<div class="line"><span class="lineno">  271</span>    char_to_nstr_ex( src, strlen( src ), &amp;strptr ) ;</div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">return</span> strptr ;</div>
<div class="line"><span class="lineno">  273</span>} <span class="comment">/* char_to_str(...) */</span></div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span><span class="comment">/*!\fn N_STR *file_to_nstr( char *filename )</span></div>
<div class="line"><span class="lineno">  279</span><span class="comment"> *\brief Load a whole file into a N_STR. Be aware of the NSTRBYTE addressing limit (2GB commonly)</span></div>
<div class="line"><span class="lineno">  280</span><span class="comment"> *\param filename The filename to load inside a N_STR</span></div>
<div class="line"><span class="lineno">  281</span><span class="comment"> *\return A valid N_STR or NULL</span></div>
<div class="line"><span class="lineno">  282</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gad2c9b27509a55615e57ef8efd2ca3a02">  283</a></span>N_STR *<a class="code hl_function" href="group___n___s_t_r.html#gad2c9b27509a55615e57ef8efd2ca3a02">file_to_nstr</a>( <span class="keywordtype">char</span> *filename )</div>
<div class="line"><span class="lineno">  284</span>{</div>
<div class="line"><span class="lineno">  285</span>    N_STR *tmpstr = NULL ;</div>
<div class="line"><span class="lineno">  286</span>    <span class="keyword">struct</span> stat filestat ;</div>
<div class="line"><span class="lineno">  287</span>    FILE *in = NULL ;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( filename, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to make a string from NULL filename&quot;</span>) ; <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">if</span>( stat( filename, &amp;filestat ) != 0 )</div>
<div class="line"><span class="lineno">  292</span>    {</div>
<div class="line"><span class="lineno">  293</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">__linux__</span></div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">if</span>( errno == EOVERFLOW )</div>
<div class="line"><span class="lineno">  295</span>        {</div>
<div class="line"><span class="lineno">  296</span>            n_log( LOG_ERR, <span class="stringliteral">&quot;%s size is too big ,EOVERFLOW)&quot;</span>, filename );</div>
<div class="line"><span class="lineno">  297</span>        }</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  299</span>        {</div>
<div class="line"><span class="lineno">  300</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Couldn&#39;t stat %s. Errno: %s&quot;</span>, filename, strerror( errno ) );</div>
<div class="line"><span class="lineno">  302</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">__linux__</span></div>
<div class="line"><span class="lineno">  303</span>        }</div>
<div class="line"><span class="lineno">  304</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">if</span>( ( filestat . st_size + 1 ) &gt;= ( pow( 2, 32 ) - 1 ) )</div>
<div class="line"><span class="lineno">  308</span>    {</div>
<div class="line"><span class="lineno">  309</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;file size &gt;= 2GB is not possible yet. %s is %lld oct&quot;</span>, filename, filestat . st_size );</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>    <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;%s file size is: %lld&quot;</span>, filename, filestat . st_size );</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>    in = fopen( filename, <span class="stringliteral">&quot;rb&quot;</span> );</div>
<div class="line"><span class="lineno">  316</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( in, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to open %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> filename ); <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    tmpstr = new_nstr( filestat . st_size + 1 );</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tmpstr, fclose( in ); <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to get a new nstr of %ld octets&quot;</span>, filestat . st_size + 1 ); <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    tmpstr -&gt; written = filestat . st_size ;</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span>( fread( tmpstr -&gt; data, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> ), tmpstr -&gt; written, in ) == 0 )</div>
<div class="line"><span class="lineno">  324</span>    {</div>
<div class="line"><span class="lineno">  325</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Couldn&#39;t read %s, fread return 0&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> filename );</div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a><a class="code hl_function" href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761">(</a> &amp;tmpstr );</div>
<div class="line"><span class="lineno">  327</span>        fclose( in );</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">  329</span>    }</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">if</span>( ferror( in ) )</div>
<div class="line"><span class="lineno">  331</span>    {</div>
<div class="line"><span class="lineno">  332</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;There were some errors when reading %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> filename );</div>
<div class="line"><span class="lineno">  333</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a><a class="code hl_function" href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761">(</a> &amp;tmpstr );</div>
<div class="line"><span class="lineno">  334</span>        fclose( in );</div>
<div class="line"><span class="lineno">  335</span>        <span class="keywordflow">return</span> NULL ;</div>
<div class="line"><span class="lineno">  336</span>    }</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    fclose( in );</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">return</span> tmpstr ;</div>
<div class="line"><span class="lineno">  341</span>} <span class="comment">/*file_to_nstr */</span></div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span><span class="comment">/*!\fn int nstr_to_fd( N_STR *str , FILE *out , int lock )</span></div>
<div class="line"><span class="lineno">  345</span><span class="comment"> *\brief Write a N_STR content into a file</span></div>
<div class="line"><span class="lineno">  346</span><span class="comment"> *\param str The N_STR *content to write down</span></div>
<div class="line"><span class="lineno">  347</span><span class="comment"> *\param out An opened FILE *handler</span></div>
<div class="line"><span class="lineno">  348</span><span class="comment"> *\param lock a write lock will be put if lock = 1</span></div>
<div class="line"><span class="lineno">  349</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  350</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span><span class="comment">/* Write a whole N_STR into a file */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaf1ad6fe037290fd52fb91b89dd978b1f">  353</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaf1ad6fe037290fd52fb91b89dd978b1f">nstr_to_fd</a>( N_STR *str, FILE *out, <span class="keywordtype">int</span> lock )</div>
<div class="line"><span class="lineno">  354</span>{</div>
<div class="line"><span class="lineno">  355</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">__linux__</span></div>
<div class="line"><span class="lineno">  356</span>    <span class="keyword">struct</span> flock out_lock ;</div>
<div class="line"><span class="lineno">  357</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">  358</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( out, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  359</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordtype">int</span> ret = TRUE ;</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">if</span>( lock == 1 )</div>
<div class="line"><span class="lineno">  364</span>    {</div>
<div class="line"><span class="lineno">  365</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">__linux__</span></div>
<div class="line"><span class="lineno">  366</span>        memset( &amp;out_lock, 0, <span class="keyword">sizeof</span>( out_lock ) );</div>
<div class="line"><span class="lineno">  367</span>        out_lock.l_type = F_WRLCK ;</div>
<div class="line"><span class="lineno">  368</span>        <span class="comment">/* Place a write lock on the file. */</span></div>
<div class="line"><span class="lineno">  369</span>        fcntl( fileno( out ), F_SETLKW, &amp;out_lock );</div>
<div class="line"><span class="lineno">  370</span><span class="preprocessor">#</span><span class="preprocessor">else</span></div>
<div class="line"><span class="lineno">  371</span>        lock = 2 ; <span class="comment">/* compiler warning suppressor */</span></div>
<div class="line"><span class="lineno">  372</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    size_t written_to_file = 0 ;</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">if</span>( (written_to_file = fwrite( str -&gt; data, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> ), str -&gt; written, out ) ) !=  (size_t)str -&gt; written )</div>
<div class="line"><span class="lineno">  377</span>    {</div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Couldn&#39;t write file, fwrite %d of %d octets&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> written_to_file<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> str <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a>  );</div>
<div class="line"><span class="lineno">  379</span>        ret = FALSE ;</div>
<div class="line"><span class="lineno">  380</span>    }</div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span>( ferror( out ) )</div>
<div class="line"><span class="lineno">  382</span>    {</div>
<div class="line"><span class="lineno">  383</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;There were some errors when writing to %d&quot;</span>, fileno( out ) );</div>
<div class="line"><span class="lineno">  384</span>        ret = FALSE ;</div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">if</span>( lock == 1 )</div>
<div class="line"><span class="lineno">  388</span>    {</div>
<div class="line"><span class="lineno">  389</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">__linux__</span></div>
<div class="line"><span class="lineno">  390</span>        memset( &amp;out_lock, 0, <span class="keyword">sizeof</span>( out_lock ) );</div>
<div class="line"><span class="lineno">  391</span>        out_lock.l_type = F_WRLCK ;</div>
<div class="line"><span class="lineno">  392</span>        <span class="comment">/* Place a write lock on the file. */</span></div>
<div class="line"><span class="lineno">  393</span>        fcntl( fileno( out ), F_SETLKW, &amp;out_lock );</div>
<div class="line"><span class="lineno">  394</span><span class="preprocessor">#</span><span class="preprocessor">else</span></div>
<div class="line"><span class="lineno">  395</span>        lock = 2 ; <span class="comment">/* compiler warning suppressor */</span></div>
<div class="line"><span class="lineno">  396</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><span class="lineno">  397</span>    }</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">return</span> ret ;</div>
<div class="line"><span class="lineno">  400</span>} <span class="comment">/* nstr_to_fd( ... ) */</span></div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span><span class="comment">/*!\fn int nstr_to_file( N_STR *str , char *filename )</span></div>
<div class="line"><span class="lineno">  405</span><span class="comment"> *\brief Write a N_STR content into a file</span></div>
<div class="line"><span class="lineno">  406</span><span class="comment"> *\param str The N_STR *content to write down</span></div>
<div class="line"><span class="lineno">  407</span><span class="comment"> *\param filename The destination filename</span></div>
<div class="line"><span class="lineno">  408</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  409</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga287229f34095426806d36c86be764d12">  410</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga287229f34095426806d36c86be764d12">nstr_to_file</a>( N_STR *str, <span class="keywordtype">char</span> *filename )</div>
<div class="line"><span class="lineno">  411</span>{</div>
<div class="line"><span class="lineno">  412</span>    FILE *out = NULL ;</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  415</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( filename, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    out = fopen( filename, <span class="stringliteral">&quot;wb&quot;</span> );</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( out, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Couldn&#39;t open %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga55b9404f7bc9d3a3ead2f0103331a87e">_str</a>( filename ) ) ; <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    nstr_to_fd( str, out, 1 );</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    fclose( out );</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno">  426</span>} <span class="comment">/* nstr_to_file( ... ) */</span></div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span><span class="comment">/*!\fn int str_to_int_ex( const char *s , NSTRBYTE start , NSTRBYTE end , int *i, const int base )</span></div>
<div class="line"><span class="lineno">  431</span><span class="comment"> * \brief Helper for string[start to end] to integer. Automatically add /0 for</span></div>
<div class="line"><span class="lineno">  432</span><span class="comment"> conversion. Leave values untouched if any error occur. Work on a copy of the</span></div>
<div class="line"><span class="lineno">  433</span><span class="comment"> chunk.</span></div>
<div class="line"><span class="lineno">  434</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  435</span><span class="comment"> * \param start Start position of the chunk</span></div>
<div class="line"><span class="lineno">  436</span><span class="comment"> * \param end End position of the chunk</span></div>
<div class="line"><span class="lineno">  437</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  438</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  439</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  440</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga55fdc7d1a7bd05f3e3925486e7fc9b9d">  441</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga55fdc7d1a7bd05f3e3925486e7fc9b9d">str_to_int_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, NSTRBYTE start, NSTRBYTE end, <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  442</span>{</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordtype">char</span> *tmpstr = NULL ;</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordtype">char</span> *endstr = NULL ;</div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordtype">long</span>  l = 0;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tmpstr, <span class="keywordtype">char</span>,  <span class="keyword">sizeof</span>( <span class="keywordtype">int</span> ) + end - start + 8 );</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tmpstr, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to Malloc( tmpstr , char ,  sizeof( int ) + %d - %d )&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> end<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> start ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    memcpy( tmpstr, s + start, end - start );</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    errno = 0;</div>
<div class="line"><span class="lineno">  455</span>    l = strtol(tmpstr, &amp;endstr, base);</div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">if</span>( ( errno == ERANGE &amp;&amp; l == LONG_MAX) || l &gt; INT_MAX )</div>
<div class="line"><span class="lineno">  457</span>    {</div>
<div class="line"><span class="lineno">  458</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;OVERFLOW reached when converting %s to int&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> tmpstr );</div>
<div class="line"><span class="lineno">  459</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  461</span>    }</div>
<div class="line"><span class="lineno">  462</span>    <span class="keywordflow">if</span>( ( errno == ERANGE &amp;&amp; l == LONG_MIN) || l &lt; INT_MIN )</div>
<div class="line"><span class="lineno">  463</span>    {</div>
<div class="line"><span class="lineno">  464</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;UNDERFLOW reached when converting %s to int&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> tmpstr );</div>
<div class="line"><span class="lineno">  465</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  466</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  467</span>    }</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">if</span>( *endstr != <span class="stringliteral">&#39;\0&#39;</span> &amp;&amp; *endstr != <span class="stringliteral">&#39;\n&#39;</span> )</div>
<div class="line"><span class="lineno">  469</span>    {</div>
<div class="line"><span class="lineno">  470</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Impossible conversion for %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> tmpstr );</div>
<div class="line"><span class="lineno">  471</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  473</span>    }</div>
<div class="line"><span class="lineno">  474</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  475</span>    *i = l;</div>
<div class="line"><span class="lineno">  476</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  477</span>}<span class="comment">/* str_to_int_ex( ... ) */</span></div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span><span class="comment">/*!\fn int str_to_int_nolog( const char *s , NSTRBYTE start , NSTRBYTE end , int *i, const int base , N_STR **infos )</span></div>
<div class="line"><span class="lineno">  483</span><span class="comment"> * \brief Helper for string[start to end] to integer. Automatically add /0 for</span></div>
<div class="line"><span class="lineno">  484</span><span class="comment"> conversion. Leave values untouched if any error occur. Work on a copy of the</span></div>
<div class="line"><span class="lineno">  485</span><span class="comment"> chunk.</span></div>
<div class="line"><span class="lineno">  486</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  487</span><span class="comment"> * \param start Start position of the chunk</span></div>
<div class="line"><span class="lineno">  488</span><span class="comment"> * \param end End position of the chunk</span></div>
<div class="line"><span class="lineno">  489</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  490</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  491</span><span class="comment"> * \param infos If not NULL , contain the errors. remember to free the pointer if returned !!</span></div>
<div class="line"><span class="lineno">  492</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  493</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga62422c326112e425298de6fb92584067">  494</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga62422c326112e425298de6fb92584067">str_to_int_nolog</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, NSTRBYTE start, NSTRBYTE end, <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base, N_STR **infos )</div>
<div class="line"><span class="lineno">  495</span>{</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordtype">char</span> *tmpstr = NULL ;</div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordtype">char</span> *endstr = NULL ;</div>
<div class="line"><span class="lineno">  498</span>    <span class="keywordtype">long</span>  l = 0;</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tmpstr, <span class="keywordtype">char</span>,  <span class="keyword">sizeof</span>( <span class="keywordtype">int</span> ) + end - start + 8 );</div>
<div class="line"><span class="lineno">  503</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tmpstr, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to Malloc( tmpstr , char ,  sizeof( int ) + %d - %d )&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> end<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> start ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>    memcpy( tmpstr, s + start, end - start );</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    errno = 0;</div>
<div class="line"><span class="lineno">  508</span>    l = strtol(tmpstr, &amp;endstr, base);</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span>( ( errno == ERANGE &amp;&amp; l == LONG_MAX) || l &gt; INT_MAX )</div>
<div class="line"><span class="lineno">  510</span>    {</div>
<div class="line"><span class="lineno">  511</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">nstrprintf</a>( (*infos), <span class="stringliteral">&quot;OVERFLOW reached when converting %s to int&quot;</span>, tmpstr );</div>
<div class="line"><span class="lineno">  512</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  514</span>    }</div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">if</span>( ( errno == ERANGE &amp;&amp; l == LONG_MIN) || l &lt; INT_MIN )</div>
<div class="line"><span class="lineno">  516</span>    {</div>
<div class="line"><span class="lineno">  517</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">nstrprintf</a>( (*infos), <span class="stringliteral">&quot;UNDERFLOW reached when converting %s to int&quot;</span>, tmpstr );</div>
<div class="line"><span class="lineno">  518</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  520</span>    }</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">if</span>( *endstr != <span class="stringliteral">&#39;\0&#39;</span> &amp;&amp; *endstr != <span class="stringliteral">&#39;\n&#39;</span> )</div>
<div class="line"><span class="lineno">  522</span>    {</div>
<div class="line"><span class="lineno">  523</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">nstrprintf</a>( (*infos), <span class="stringliteral">&quot;Impossible conversion for %s&quot;</span>, tmpstr );</div>
<div class="line"><span class="lineno">  524</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  525</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  526</span>    }</div>
<div class="line"><span class="lineno">  527</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  528</span>    *i = l;</div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  530</span>}<span class="comment">/* str_to_int_nolog( ... ) */</span></div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span><span class="comment">/*!\fn int str_to_int( const char *s , int *i, const int base )</span></div>
<div class="line"><span class="lineno">  535</span><span class="comment"> * \brief Helper for string to integer</span></div>
<div class="line"><span class="lineno">  536</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  537</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  538</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  539</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  540</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gae2c2238ae654a58f23570ce58e4d0eb8">  541</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gae2c2238ae654a58f23570ce58e4d0eb8">str_to_int</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  542</span>{</div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordtype">int</span> ret = FALSE ;</div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">if</span>( s )</div>
<div class="line"><span class="lineno">  545</span>    {</div>
<div class="line"><span class="lineno">  546</span>        ret = str_to_int_ex( s, 0, strlen( s ), i, base );</div>
<div class="line"><span class="lineno">  547</span>    }</div>
<div class="line"><span class="lineno">  548</span>    <span class="keywordflow">return</span> ret ;</div>
<div class="line"><span class="lineno">  549</span>} <span class="comment">/* str_to_int(...) */</span></div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span><span class="comment">/*!\fn int str_to_long_ex( const char *s , NSTRBYTE start , NSTRBYTE end , long int *i, const int base )</span></div>
<div class="line"><span class="lineno">  554</span><span class="comment"> * \brief Helper for string[start to end] to long integer. Automatically add /0 for</span></div>
<div class="line"><span class="lineno">  555</span><span class="comment"> conversion. Leave values untouched if any error occur. Work on a copy of the</span></div>
<div class="line"><span class="lineno">  556</span><span class="comment"> chunk.</span></div>
<div class="line"><span class="lineno">  557</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  558</span><span class="comment"> * \param start Start position of the chunk</span></div>
<div class="line"><span class="lineno">  559</span><span class="comment"> * \param end End position of the chunk</span></div>
<div class="line"><span class="lineno">  560</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  561</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  562</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  563</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaf2fb09488bdaa0e8662f639ea899627e">  564</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaf2fb09488bdaa0e8662f639ea899627e">str_to_long_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, NSTRBYTE start, NSTRBYTE end, <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  565</span>{</div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordtype">char</span> *tmpstr = NULL ;</div>
<div class="line"><span class="lineno">  567</span>    <span class="keywordtype">char</span> *endstr = NULL ;</div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordtype">long</span>  l = 0;</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tmpstr, <span class="keywordtype">char</span>,  <span class="keyword">sizeof</span>( <span class="keywordtype">int</span> ) + end - start  + 8 );</div>
<div class="line"><span class="lineno">  573</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tmpstr, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to Malloc( tmpstr , char ,  sizeof( int ) + %d - %d )&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> end<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> start ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>    memcpy( tmpstr, s + start, end - start );</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    errno = 0;</div>
<div class="line"><span class="lineno">  578</span>    l = strtol(tmpstr, &amp;endstr, base);</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordtype">int</span> error = errno ;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    <span class="comment">/* test return to number and errno values */</span></div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">if</span> (tmpstr == endstr)</div>
<div class="line"><span class="lineno">  583</span>    {</div>
<div class="line"><span class="lineno">  584</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %lu  invalid  (no digits found, 0 returned)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  585</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  586</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == ERANGE &amp;&amp; l == LONG_MIN)</div>
<div class="line"><span class="lineno">  589</span>    {</div>
<div class="line"><span class="lineno">  590</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %lu  invalid  (underflow occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  591</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  593</span>    }</div>
<div class="line"><span class="lineno">  594</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == ERANGE &amp;&amp; l == LONG_MAX)</div>
<div class="line"><span class="lineno">  595</span>    {</div>
<div class="line"><span class="lineno">  596</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %lu  invalid  (overflow occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  597</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  598</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  599</span>    }</div>
<div class="line"><span class="lineno">  600</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == EINVAL)  <span class="comment">/* not in all c99 implementations - gcc OK */</span></div>
<div class="line"><span class="lineno">  601</span>    {</div>
<div class="line"><span class="lineno">  602</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %lu  invalid  (base contains unsupported value)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  603</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  605</span>    }</div>
<div class="line"><span class="lineno">  606</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error != 0 &amp;&amp; l == 0)</div>
<div class="line"><span class="lineno">  607</span>    {</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %lu  invalid  (unspecified error occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  610</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  611</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  612</span>    }</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == 0 &amp;&amp; tmpstr &amp;&amp; !*endstr)</div>
<div class="line"><span class="lineno">  614</span>    {</div>
<div class="line"><span class="lineno">  615</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot; number : %lu    valid  (and represents all characters read)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  616</span>    }</div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == 0 &amp;&amp; tmpstr &amp;&amp; *endstr != 0)</div>
<div class="line"><span class="lineno">  618</span>    {</div>
<div class="line"><span class="lineno">  619</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>,<span class="stringliteral">&quot; number : %lu    valid  (but additional characters remain&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  620</span>    }</div>
<div class="line"><span class="lineno">  621</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  622</span>    *i = l;</div>
<div class="line"><span class="lineno">  623</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  624</span>}<span class="comment">/* str_to_long_ex( ... ) */</span></div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span><span class="comment">/*!\fn int str_to_long_long_ex( const char *s , NSTRBYTE start , NSTRBYTE end , long long int *i, const int base )</span></div>
<div class="line"><span class="lineno">  629</span><span class="comment"> * \brief Helper for string[start to end] to long long integer. Automatically add /0 for</span></div>
<div class="line"><span class="lineno">  630</span><span class="comment"> conversion. Leave values untouched if any error occur. Work on a copy of the</span></div>
<div class="line"><span class="lineno">  631</span><span class="comment"> chunk.</span></div>
<div class="line"><span class="lineno">  632</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  633</span><span class="comment"> * \param start Start position of the chunk</span></div>
<div class="line"><span class="lineno">  634</span><span class="comment"> * \param end End position of the chunk</span></div>
<div class="line"><span class="lineno">  635</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  636</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  637</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  638</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga342bfee6550085fdf64e3db3cdd3ecb3">  639</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga342bfee6550085fdf64e3db3cdd3ecb3">str_to_long_long_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, NSTRBYTE start, NSTRBYTE end, <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  640</span>{</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordtype">char</span> *tmpstr = NULL ;</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordtype">char</span> *endstr = NULL ;</div>
<div class="line"><span class="lineno">  643</span>    <span class="keywordtype">long</span> <span class="keywordtype">long</span>  l = 0;</div>
<div class="line"><span class="lineno">  644</span> </div>
<div class="line"><span class="lineno">  645</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( s, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tmpstr, <span class="keywordtype">char</span>,  <span class="keyword">sizeof</span>( <span class="keywordtype">int</span> ) + end - start + 8 );</div>
<div class="line"><span class="lineno">  648</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tmpstr, <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to Malloc( tmpstr , char ,  sizeof( int ) + %d - %d )&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> end<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> start ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>    memcpy( tmpstr, s + start, end - start );</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>    errno = 0;</div>
<div class="line"><span class="lineno">  653</span>    l = strtoll(tmpstr, &amp;endstr, base);</div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordtype">int</span> error = errno ;</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>    <span class="comment">/* test return to number and errno values */</span></div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">if</span> (tmpstr == endstr)</div>
<div class="line"><span class="lineno">  658</span>    {</div>
<div class="line"><span class="lineno">  659</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %llu  invalid  (no digits found, 0 returned)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  660</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  661</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  662</span>    }</div>
<div class="line"><span class="lineno">  663</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == ERANGE &amp;&amp; l == LLONG_MIN)</div>
<div class="line"><span class="lineno">  664</span>    {</div>
<div class="line"><span class="lineno">  665</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %llu  invalid  (underflow occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  666</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  667</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  668</span>    }</div>
<div class="line"><span class="lineno">  669</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == ERANGE &amp;&amp; l == LLONG_MAX)</div>
<div class="line"><span class="lineno">  670</span>    {</div>
<div class="line"><span class="lineno">  671</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %llu  invalid  (overflow occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  672</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  673</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  674</span>    }</div>
<div class="line"><span class="lineno">  675</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == EINVAL)  <span class="comment">/* not in all c99 implementations - gcc OK */</span></div>
<div class="line"><span class="lineno">  676</span>    {</div>
<div class="line"><span class="lineno">  677</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %llu  invalid  (base contains unsupported value)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  678</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  679</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  680</span>    }</div>
<div class="line"><span class="lineno">  681</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error != 0 &amp;&amp; l == 0)</div>
<div class="line"><span class="lineno">  682</span>    {</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot; number : %llu  invalid  (unspecified error occurred)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  685</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  686</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  687</span>    }</div>
<div class="line"><span class="lineno">  688</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == 0 &amp;&amp; tmpstr &amp;&amp; !*endstr)</div>
<div class="line"><span class="lineno">  689</span>    {</div>
<div class="line"><span class="lineno">  690</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot; number : %llu    valid  (and represents all characters read)&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  691</span>    }</div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == 0 &amp;&amp; tmpstr &amp;&amp; *endstr != 0)</div>
<div class="line"><span class="lineno">  693</span>    {</div>
<div class="line"><span class="lineno">  694</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>,<span class="stringliteral">&quot; number : %llu    valid  (but additional characters remain&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> l );</div>
<div class="line"><span class="lineno">  695</span>    }</div>
<div class="line"><span class="lineno">  696</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( tmpstr );</div>
<div class="line"><span class="lineno">  697</span>    *i = l;</div>
<div class="line"><span class="lineno">  698</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  699</span>}<span class="comment">/* str_to_long_long_ex( ... ) */</span></div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span><span class="comment">/*!\fn int str_to_long( const char *s , long int *i, const int base )</span></div>
<div class="line"><span class="lineno">  704</span><span class="comment"> * \brief Helper for string to integer</span></div>
<div class="line"><span class="lineno">  705</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  706</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  707</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  708</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  709</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gabe0231d30f0adca6678adba9ffca328a">  710</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gabe0231d30f0adca6678adba9ffca328a">str_to_long</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  711</span>{</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordtype">int</span> ret = FALSE ;</div>
<div class="line"><span class="lineno">  713</span>    <span class="keywordflow">if</span>( s )</div>
<div class="line"><span class="lineno">  714</span>    {</div>
<div class="line"><span class="lineno">  715</span>        ret = str_to_long_ex( s, 0, strlen( s ), i, base );</div>
<div class="line"><span class="lineno">  716</span>    }</div>
<div class="line"><span class="lineno">  717</span>    <span class="keywordflow">return</span> ret ;</div>
<div class="line"><span class="lineno">  718</span>} <span class="comment">/* str_to_long(...) */</span></div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span><span class="comment">/*!\fn int str_to_long_long( const char *s , long int *i, const int base )</span></div>
<div class="line"><span class="lineno">  723</span><span class="comment"> * \brief Helper for string to integer</span></div>
<div class="line"><span class="lineno">  724</span><span class="comment"> * \param s String to convert</span></div>
<div class="line"><span class="lineno">  725</span><span class="comment"> * \param i A pointer to an integer variable which will receieve the value.</span></div>
<div class="line"><span class="lineno">  726</span><span class="comment"> * \param base Base for converting values</span></div>
<div class="line"><span class="lineno">  727</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  728</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga04812d120313b73e6e22493cad0ec75d">  729</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga04812d120313b73e6e22493cad0ec75d">str_to_long_long</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base )</div>
<div class="line"><span class="lineno">  730</span>{</div>
<div class="line"><span class="lineno">  731</span>    <span class="keywordtype">int</span> ret = FALSE ;</div>
<div class="line"><span class="lineno">  732</span>    <span class="keywordflow">if</span>( s )</div>
<div class="line"><span class="lineno">  733</span>    {</div>
<div class="line"><span class="lineno">  734</span>        ret = str_to_long_long_ex( s, 0, strlen( s ), i, base );</div>
<div class="line"><span class="lineno">  735</span>    }</div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">return</span> ret ;</div>
<div class="line"><span class="lineno">  737</span>} <span class="comment">/* str_to_long(...) */</span></div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span><span class="comment">/*!\fn N_STR *nstrdup( N_STR *str )</span></div>
<div class="line"><span class="lineno">  742</span><span class="comment"> *\brief Duplicate a N_STR</span></div>
<div class="line"><span class="lineno">  743</span><span class="comment"> *\param str A N_STR *object to free</span></div>
<div class="line"><span class="lineno">  744</span><span class="comment"> *\return A valid N_STR or NULL</span></div>
<div class="line"><span class="lineno">  745</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga3e30a18ec42d0f4cd8651c442bf62651">  746</a></span>N_STR *<a class="code hl_function" href="group___n___s_t_r.html#ga3e30a18ec42d0f4cd8651c442bf62651">nstrdup</a>( N_STR *str )</div>
<div class="line"><span class="lineno">  747</span>{</div>
<div class="line"><span class="lineno">  748</span>    N_STR *new_str = NULL ;</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  751</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>    new_str = <a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">new_nstr</a><a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">(</a> str <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> <a class="code hl_function" href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">)</a>;</div>
<div class="line"><span class="lineno">  754</span>    <span class="keywordflow">if</span>( new_str )</div>
<div class="line"><span class="lineno">  755</span>    {</div>
<div class="line"><span class="lineno">  756</span>        <span class="keywordflow">if</span>( new_str <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a> )</div>
<div class="line"><span class="lineno">  757</span>        {</div>
<div class="line"><span class="lineno">  758</span>            memcpy(  new_str <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, str <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, str <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> );</div>
<div class="line"><span class="lineno">  759</span>            new_str <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> = str <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> ;</div>
<div class="line"><span class="lineno">  760</span>            new_str <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> = str <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> ;</div>
<div class="line"><span class="lineno">  761</span>        }</div>
<div class="line"><span class="lineno">  762</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  763</span>        {</div>
<div class="line"><span class="lineno">  764</span>            <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( new_str );</div>
<div class="line"><span class="lineno">  765</span>            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Error duplicating N_STR %p -&gt; data&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> str );</div>
<div class="line"><span class="lineno">  766</span>        }</div>
<div class="line"><span class="lineno">  767</span>    }</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  769</span>    {</div>
<div class="line"><span class="lineno">  770</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Error duplicating N_STR %p&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> str );</div>
<div class="line"><span class="lineno">  771</span>    }</div>
<div class="line"><span class="lineno">  772</span>    <span class="keywordflow">return</span> new_str ;</div>
<div class="line"><span class="lineno">  773</span>} <span class="comment">/* nstrdup(...) */</span></div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span><span class="comment">/*!\fn int skipw( char *string , char toskip , NSTRBYTE *iterator , NSTRBYTE inc )</span></div>
<div class="line"><span class="lineno">  778</span><span class="comment"> *\brief skip while &#39;toskip&#39; occurence is found from &#39;iterator&#39; to the next non &#39;toskip&#39; position.</span></div>
<div class="line"><span class="lineno">  779</span><span class="comment"> * The new iterator index is automatically stored, returning to it first value if an error append.</span></div>
<div class="line"><span class="lineno">  780</span><span class="comment"> *\param string a char *string to search in</span></div>
<div class="line"><span class="lineno">  781</span><span class="comment"> *\param toskip skipping while char character &#39;toskip&#39; is found</span></div>
<div class="line"><span class="lineno">  782</span><span class="comment"> *\param iterator an int iteraor position on the string</span></div>
<div class="line"><span class="lineno">  783</span><span class="comment"> *\param inc an int to specify the step of skipping</span></div>
<div class="line"><span class="lineno">  784</span><span class="comment"> *\return TRUE if success FALSE or ABORT if not</span></div>
<div class="line"><span class="lineno">  785</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga783070a793146a860c3651c8434f32e1">  786</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga783070a793146a860c3651c8434f32e1">skipw</a>( <span class="keywordtype">char</span> *string, <span class="keywordtype">char</span> toskip, NSTRBYTE *iterator, <span class="keywordtype">int</span> inc )</div>
<div class="line"><span class="lineno">  787</span>{</div>
<div class="line"><span class="lineno">  788</span>    <span class="keywordtype">int</span> error_flag = 0 ;</div>
<div class="line"><span class="lineno">  789</span>    <span class="comment">//NSTRBYTE previous = 0 ;</span></div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( string, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>    <span class="comment">//previous = *iterator;</span></div>
<div class="line"><span class="lineno">  794</span>    <span class="keywordflow">if</span>( toskip == <span class="stringliteral">&#39; &#39;</span> )</div>
<div class="line"><span class="lineno">  795</span>    {</div>
<div class="line"><span class="lineno">  796</span>        <span class="keywordflow">while</span>( *iterator &lt;= (NSTRBYTE)strlen ( string ) &amp;&amp; isspace( string[ *iterator ] ) )</div>
<div class="line"><span class="lineno">  797</span>        {</div>
<div class="line"><span class="lineno">  798</span>            <span class="keywordflow">if</span>( inc &lt; 0 &amp;&amp; *iterator == 0 )</div>
<div class="line"><span class="lineno">  799</span>            {</div>
<div class="line"><span class="lineno">  800</span>                error_flag = 1 ;</div>
<div class="line"><span class="lineno">  801</span>                <span class="keywordflow">break</span> ;</div>
<div class="line"><span class="lineno">  802</span>            }</div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  804</span>                *iterator = *iterator + inc;</div>
<div class="line"><span class="lineno">  805</span>        }</div>
<div class="line"><span class="lineno">  806</span>    }</div>
<div class="line"><span class="lineno">  807</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  808</span>    {</div>
<div class="line"><span class="lineno">  809</span>        <span class="keywordflow">while</span>( *iterator &lt;= (NSTRBYTE)strlen( string ) &amp;&amp; string[ *iterator ] == toskip )</div>
<div class="line"><span class="lineno">  810</span>        {</div>
<div class="line"><span class="lineno">  811</span>            <span class="keywordflow">if</span>( inc &lt; 0 &amp;&amp; *iterator == 0 )</div>
<div class="line"><span class="lineno">  812</span>            {</div>
<div class="line"><span class="lineno">  813</span>                error_flag = 1 ;</div>
<div class="line"><span class="lineno">  814</span>                <span class="keywordflow">break</span> ;</div>
<div class="line"><span class="lineno">  815</span>            }</div>
<div class="line"><span class="lineno">  816</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  817</span>                *iterator = *iterator + inc;</div>
<div class="line"><span class="lineno">  818</span>        }</div>
<div class="line"><span class="lineno">  819</span>    }</div>
<div class="line"><span class="lineno">  820</span>    <span class="keywordflow">if</span>( error_flag == 1 || *iterator &gt; (NSTRBYTE)strlen ( string ) )</div>
<div class="line"><span class="lineno">  821</span>    {</div>
<div class="line"><span class="lineno">  822</span>        <span class="comment">//*iterator = previous ;</span></div>
<div class="line"><span class="lineno">  823</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  824</span>    }</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  827</span>} <span class="comment">/*skipw(...)*/</span></div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span><span class="comment">/*!\fn skipu( char *string , char toskip , NSTRBYTE *iterator , int inc )</span></div>
<div class="line"><span class="lineno">  832</span><span class="comment"> *\brief skip until &#39;toskip&#39; occurence is found from &#39;iterator&#39; to the next &#39;toskip&#39; value.</span></div>
<div class="line"><span class="lineno">  833</span><span class="comment"> * The new iterator index is automatically stored, returning to it first value if an error append.</span></div>
<div class="line"><span class="lineno">  834</span><span class="comment"> *\param string a char *stri:wqng to search in</span></div>
<div class="line"><span class="lineno">  835</span><span class="comment"> *\param toskip skipping while char character &#39;toskip&#39; isnt found</span></div>
<div class="line"><span class="lineno">  836</span><span class="comment"> *\param iterator an int iteraor position on the string</span></div>
<div class="line"><span class="lineno">  837</span><span class="comment"> *\param inc an int to specify the step of skipping</span></div>
<div class="line"><span class="lineno">  838</span><span class="comment"> *\return TRUE if success FALSE or ABORT if not</span></div>
<div class="line"><span class="lineno">  839</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gae4317ddc09606fcca46265a53bfbfb8b">  840</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gae4317ddc09606fcca46265a53bfbfb8b">skipu</a>( <span class="keywordtype">char</span> *string, <span class="keywordtype">char</span> toskip, NSTRBYTE *iterator, <span class="keywordtype">int</span> inc )</div>
<div class="line"><span class="lineno">  841</span>{</div>
<div class="line"><span class="lineno">  842</span>    <span class="keywordtype">int</span> error_flag = 0 ;</div>
<div class="line"><span class="lineno">  843</span>    <span class="comment">//NSTRBYTE previous = 0 ;</span></div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( string, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>    <span class="comment">//previous = *iterator;</span></div>
<div class="line"><span class="lineno">  848</span>    <span class="keywordflow">if</span>( toskip == <span class="stringliteral">&#39; &#39;</span> )</div>
<div class="line"><span class="lineno">  849</span>    {</div>
<div class="line"><span class="lineno">  850</span>        <span class="keywordflow">while</span>( *iterator &lt;= (NSTRBYTE)strlen ( string ) &amp;&amp; !isspace( string[ *iterator ] ) )</div>
<div class="line"><span class="lineno">  851</span>        {</div>
<div class="line"><span class="lineno">  852</span>            <span class="keywordflow">if</span>( inc &lt; 0 &amp;&amp; *iterator == 0 )</div>
<div class="line"><span class="lineno">  853</span>            {</div>
<div class="line"><span class="lineno">  854</span>                error_flag = 1 ;</div>
<div class="line"><span class="lineno">  855</span>                <span class="keywordflow">break</span> ;</div>
<div class="line"><span class="lineno">  856</span>            }</div>
<div class="line"><span class="lineno">  857</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  858</span>                *iterator = *iterator + inc;</div>
<div class="line"><span class="lineno">  859</span>        }</div>
<div class="line"><span class="lineno">  860</span>    }</div>
<div class="line"><span class="lineno">  861</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  862</span>    {</div>
<div class="line"><span class="lineno">  863</span>        <span class="keywordflow">while</span>( *iterator &lt;= (NSTRBYTE)strlen( string ) &amp;&amp; string[ *iterator ] != toskip )</div>
<div class="line"><span class="lineno">  864</span>        {</div>
<div class="line"><span class="lineno">  865</span>            <span class="keywordflow">if</span>( inc &lt; 0 &amp;&amp; *iterator == 0 )</div>
<div class="line"><span class="lineno">  866</span>            {</div>
<div class="line"><span class="lineno">  867</span>                error_flag = 1 ;</div>
<div class="line"><span class="lineno">  868</span>                <span class="keywordflow">break</span> ;</div>
<div class="line"><span class="lineno">  869</span>            }</div>
<div class="line"><span class="lineno">  870</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  871</span>                *iterator = *iterator + inc;</div>
<div class="line"><span class="lineno">  872</span>        }</div>
<div class="line"><span class="lineno">  873</span>    }</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>    <span class="keywordflow">if</span>( error_flag == 1 || *iterator &gt; (NSTRBYTE)strlen ( string ) )</div>
<div class="line"><span class="lineno">  876</span>    {</div>
<div class="line"><span class="lineno">  877</span>        <span class="comment">//*iterator = previous ;</span></div>
<div class="line"><span class="lineno">  878</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  879</span>    }</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  882</span>} <span class="comment">/*Skipu(...)*/</span></div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span><span class="comment">/*!\fn int strup( char *string , char *dest )</span></div>
<div class="line"><span class="lineno">  887</span><span class="comment"> *\brief Upper case a string</span></div>
<div class="line"><span class="lineno">  888</span><span class="comment"> *\param string the string to change to upper case</span></div>
<div class="line"><span class="lineno">  889</span><span class="comment"> *\param dest the string where storing result</span></div>
<div class="line"><span class="lineno">  890</span><span class="comment"> *\warning string must be same size as dest</span></div>
<div class="line"><span class="lineno">  891</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  892</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gabb57d0188e78f2520d4ae7cc805579f5">  893</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gabb57d0188e78f2520d4ae7cc805579f5">strup</a>( <span class="keywordtype">char</span> *string, <span class="keywordtype">char</span> *dest )</div>
<div class="line"><span class="lineno">  894</span>{</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span>    NSTRBYTE it = 0 ;</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( string, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  899</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( dest, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>    <span class="keywordflow">for</span>( it = 0 ; it &lt; (NSTRBYTE)strlen( string ) ; it++ )</div>
<div class="line"><span class="lineno">  902</span>        dest[ it ] = toupper ( string[ it ] );</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  905</span>} <span class="comment">/*strup(...)*/</span></div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span><span class="comment">/*!\fn strlo( char *string , char *dest )</span></div>
<div class="line"><span class="lineno">  910</span><span class="comment"> *\brief Upper case a string</span></div>
<div class="line"><span class="lineno">  911</span><span class="comment"> *\param string the string to change to lower case</span></div>
<div class="line"><span class="lineno">  912</span><span class="comment"> *\param dest the string where storing result</span></div>
<div class="line"><span class="lineno">  913</span><span class="comment"> *\warning string must be same size as dest</span></div>
<div class="line"><span class="lineno">  914</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  915</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaeaf9add3ea7a87eeea6e0cc4a81b47e6">  916</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaeaf9add3ea7a87eeea6e0cc4a81b47e6">strlo</a>( <span class="keywordtype">char</span> *string, <span class="keywordtype">char</span> *dest )</div>
<div class="line"><span class="lineno">  917</span>{</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span>    NSTRBYTE it = 0 ;</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( string, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  922</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( dest, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>    <span class="keywordflow">for</span>( it = 0 ; it &lt; (NSTRBYTE)strlen( string ) ; it++ )</div>
<div class="line"><span class="lineno">  925</span>        dest[ it ] = tolower ( string[ it ] );</div>
<div class="line"><span class="lineno">  926</span> </div>
<div class="line"><span class="lineno">  927</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  928</span>} <span class="comment">/*strlo(...)*/</span></div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span><span class="comment">/*!\fn int strcpy_u( char *from , char *to , NSTRBYTE to_size , char split , NSTRBYTE *it )</span></div>
<div class="line"><span class="lineno">  933</span><span class="comment"> *\brief Copy from start to dest until from[ iterator ] == split</span></div>
<div class="line"><span class="lineno">  934</span><span class="comment"> *\param from Source string</span></div>
<div class="line"><span class="lineno">  935</span><span class="comment"> *\param to Dest string</span></div>
<div class="line"><span class="lineno">  936</span><span class="comment"> *\param to_size the maximum size to write</span></div>
<div class="line"><span class="lineno">  937</span><span class="comment"> *\param split stopping character</span></div>
<div class="line"><span class="lineno">  938</span><span class="comment"> *\param it Save of iterator</span></div>
<div class="line"><span class="lineno">  939</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno">  940</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga0484a44a99d2ad895e2c111b34ea5e39">  941</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga0484a44a99d2ad895e2c111b34ea5e39">strcpy_u</a>( <span class="keywordtype">char</span> *from, <span class="keywordtype">char</span> *to, NSTRBYTE to_size, <span class="keywordtype">char</span> split, NSTRBYTE *it )</div>
<div class="line"><span class="lineno">  942</span>{</div>
<div class="line"><span class="lineno">  943</span>    NSTRBYTE _it = 0;</div>
<div class="line"><span class="lineno">  944</span> </div>
<div class="line"><span class="lineno">  945</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( from, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  946</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( to, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  947</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( it, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>    <span class="keywordflow">while</span>( _it &lt; to_size &amp;&amp; from[ (*it) ] != <span class="stringliteral">&#39;\0&#39;</span> &amp;&amp; from[ (*it) ] != split  )</div>
<div class="line"><span class="lineno">  950</span>    {</div>
<div class="line"><span class="lineno">  951</span>        to[ _it ] = from[ (*it) ] ;</div>
<div class="line"><span class="lineno">  952</span>        (*it) = (*it) + 1 ;</div>
<div class="line"><span class="lineno">  953</span>        _it = _it +1 ;</div>
<div class="line"><span class="lineno">  954</span>    }</div>
<div class="line"><span class="lineno">  955</span> </div>
<div class="line"><span class="lineno">  956</span>    <span class="keywordflow">if</span>( _it == to_size )</div>
<div class="line"><span class="lineno">  957</span>    {</div>
<div class="line"><span class="lineno">  958</span>        _it -- ;</div>
<div class="line"><span class="lineno">  959</span>        to[ _it ] = <span class="stringliteral">&#39;\0&#39;</span> ;</div>
<div class="line"><span class="lineno">  960</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(  <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;strcpy_u: not enough space to write %d octet to dest (%d max) , %s: %d \n&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> _it<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> to_size<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> __FILE__<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> __LINE__ );</div>
<div class="line"><span class="lineno">  961</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  962</span>    }</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>    to[ _it ] = <span class="stringliteral">&#39;\0&#39;</span> ;</div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>    <span class="keywordflow">if</span>( from[ (*it) ] != split )</div>
<div class="line"><span class="lineno">  967</span>    {</div>
<div class="line"><span class="lineno">  968</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(  <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;strcpy_u: split value not found, written %d octet to dest (%d max) , %s: %d \n&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> _it<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> to_size<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> __FILE__<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> __LINE__ );</div>
<div class="line"><span class="lineno">  969</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  970</span>    }</div>
<div class="line"><span class="lineno">  971</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno">  972</span>} <span class="comment">/* strcpy_u(...) */</span></div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span><span class="comment">/*!\fn char **split( char* str , const char* delim , int empty )</span></div>
<div class="line"><span class="lineno">  977</span><span class="comment"> *\brief Split the strings into a an array of char *pointer     , ended by a NULL one. Max 256 splitted elements per call.</span></div>
<div class="line"><span class="lineno">  978</span><span class="comment"> *\param str The char *str to split</span></div>
<div class="line"><span class="lineno">  979</span><span class="comment"> *\param delim The delimiter, one or more characters</span></div>
<div class="line"><span class="lineno">  980</span><span class="comment"> *\param empty Empty flag. If 1, then empty delimited areas will be added as NULL entries, else they will be skipped.</span></div>
<div class="line"><span class="lineno">  981</span><span class="comment"> *\return An array of char *, ended by a NULL entry.</span></div>
<div class="line"><span class="lineno">  982</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gab731024d29b0937615c1cdddeb8d4875">  983</a></span><span class="keywordtype">char</span>** <a class="code hl_function" href="group___n___s_t_r.html#gab731024d29b0937615c1cdddeb8d4875">split</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* str, <span class="keyword">const</span> <span class="keywordtype">char</span>* delim, <span class="keywordtype">int</span> empty )</div>
<div class="line"><span class="lineno">  984</span>{</div>
<div class="line"><span class="lineno">  985</span>    <span class="keywordtype">char</span>** tab=NULL; <span class="comment">/* result array */</span></div>
<div class="line"><span class="lineno">  986</span>    <span class="keywordtype">char</span> *ptr = NULL ; <span class="comment">/* tmp pointer */</span></div>
<div class="line"><span class="lineno">  987</span>    <span class="keywordtype">int</span> sizeStr=0; <span class="comment">/* string token size */</span></div>
<div class="line"><span class="lineno">  988</span>    <span class="keywordtype">int</span> sizeTab=0; <span class="comment">/* array size */</span></div>
<div class="line"><span class="lineno">  989</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* largestring = NULL; <span class="comment">/* pointer to start of string */</span></div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( str, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  992</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( delim, <span class="keywordflow">return</span> NULL );</div>
<div class="line"><span class="lineno">  993</span> </div>
<div class="line"><span class="lineno">  994</span>    <span class="keywordtype">int</span> sizeDelim=strlen(delim);</div>
<div class="line"><span class="lineno">  995</span>    largestring = str;</div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordflow">while</span>( ( ptr = strstr( largestring, delim ) ) != NULL )</div>
<div class="line"><span class="lineno">  998</span>    {</div>
<div class="line"><span class="lineno">  999</span>        sizeStr=ptr-largestring;</div>
<div class="line"><span class="lineno"> 1000</span>        <span class="keywordflow">if</span>( empty == 1 || sizeStr != 0 )</div>
<div class="line"><span class="lineno"> 1001</span>        {</div>
<div class="line"><span class="lineno"> 1002</span>            sizeTab++;</div>
<div class="line"><span class="lineno"> 1003</span>            tab= (<span class="keywordtype">char</span>**) realloc(tab,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*sizeTab);</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>            <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tab[sizeTab -1], <span class="keywordtype">char</span>, (<span class="keywordtype">int</span>)(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*(sizeStr+1)) );</div>
<div class="line"><span class="lineno"> 1006</span>            <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tab[ sizeTab - 1 ], <span class="keywordflow">goto</span> error );</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>            memcpy(tab[sizeTab-1],largestring,sizeStr);</div>
<div class="line"><span class="lineno"> 1009</span>            tab[sizeTab-1][sizeStr]=<span class="stringliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1010</span>        }</div>
<div class="line"><span class="lineno"> 1011</span>        ptr=ptr+sizeDelim;</div>
<div class="line"><span class="lineno"> 1012</span>        largestring=ptr;</div>
<div class="line"><span class="lineno"> 1013</span>    }</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span>    <span class="comment">/* adding last part if any */</span></div>
<div class="line"><span class="lineno"> 1016</span>    <span class="keywordflow">if</span>( strlen(largestring) !=0 )</div>
<div class="line"><span class="lineno"> 1017</span>    {</div>
<div class="line"><span class="lineno"> 1018</span>        sizeStr=strlen(largestring);</div>
<div class="line"><span class="lineno"> 1019</span>        sizeTab++;</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>        tab= (<span class="keywordtype">char</span>**) realloc(tab,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*sizeTab);</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tab[sizeTab-1], <span class="keywordtype">char</span>,(<span class="keywordtype">int</span>)(  <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*(sizeStr+1) ) );</div>
<div class="line"><span class="lineno"> 1024</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tab[ sizeTab - 1 ], <span class="keywordflow">goto</span> error );</div>
<div class="line"><span class="lineno"> 1025</span> </div>
<div class="line"><span class="lineno"> 1026</span>        memcpy(tab[sizeTab-1],largestring,sizeStr);</div>
<div class="line"><span class="lineno"> 1027</span>        tab[sizeTab-1][sizeStr]=<span class="stringliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1028</span>    }</div>
<div class="line"><span class="lineno"> 1029</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1030</span>    {</div>
<div class="line"><span class="lineno"> 1031</span>        <span class="keywordflow">if</span>( empty == 1 )</div>
<div class="line"><span class="lineno"> 1032</span>        {</div>
<div class="line"><span class="lineno"> 1033</span>            sizeTab++;</div>
<div class="line"><span class="lineno"> 1034</span>            tab= (<span class="keywordtype">char</span>**) realloc(tab,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*sizeTab);</div>
<div class="line"><span class="lineno"> 1035</span> </div>
<div class="line"><span class="lineno"> 1036</span>            <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( tab[sizeTab-1], <span class="keywordtype">char</span>, (<span class="keywordtype">int</span>)(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*1) );</div>
<div class="line"><span class="lineno"> 1037</span>            <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( tab[ sizeTab - 1 ], <span class="keywordflow">goto</span> error );</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>            tab[sizeTab-1][0]=<span class="stringliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1040</span>        }</div>
<div class="line"><span class="lineno"> 1041</span>    }</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>    <span class="comment">/* on ajoute une case a null pour finir le tableau */</span></div>
<div class="line"><span class="lineno"> 1044</span>    sizeTab++;</div>
<div class="line"><span class="lineno"> 1045</span>    tab= (<span class="keywordtype">char</span>**) realloc(tab,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*sizeTab);</div>
<div class="line"><span class="lineno"> 1046</span>    tab[sizeTab-1]=NULL;</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>    <span class="keywordflow">return</span> tab;</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>error:</div>
<div class="line"><span class="lineno"> 1051</span>    <a class="code hl_function" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf">free_split_result</a><a class="code hl_function" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf">(</a> &amp;tab <a class="code hl_function" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf">)</a>;</div>
<div class="line"><span class="lineno"> 1052</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1053</span>} <span class="comment">/* split( ... ) */</span></div>
<div class="line"><span class="lineno"> 1054</span> </div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span><span class="comment">/*!\fn int split_count( char **split_result )</span></div>
<div class="line"><span class="lineno"> 1058</span><span class="comment"> *\brief Count split elements</span></div>
<div class="line"><span class="lineno"> 1059</span><span class="comment"> *\param split_result A char **result from a split call</span></div>
<div class="line"><span class="lineno"> 1060</span><span class="comment"> *\return The number of elements or -1 if errors</span></div>
<div class="line"><span class="lineno"> 1061</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga194b81c0709d24aef9b6f7e8635d3966"> 1062</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga194b81c0709d24aef9b6f7e8635d3966">split_count</a>( <span class="keywordtype">char</span> **split_result )</div>
<div class="line"><span class="lineno"> 1063</span>{</div>
<div class="line"><span class="lineno"> 1064</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( split_result, <span class="keywordflow">return</span> -1 );</div>
<div class="line"><span class="lineno"> 1065</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( split_result[ 0 ], <span class="keywordflow">return</span> -1 );</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>    <span class="keywordtype">int</span> it = 0 ;</div>
<div class="line"><span class="lineno"> 1068</span>    <span class="keywordflow">while</span>( split_result[ it ] )</div>
<div class="line"><span class="lineno"> 1069</span>    {</div>
<div class="line"><span class="lineno"> 1070</span>        it ++ ;</div>
<div class="line"><span class="lineno"> 1071</span>    }</div>
<div class="line"><span class="lineno"> 1072</span>    <span class="keywordflow">return</span> it ;</div>
<div class="line"><span class="lineno"> 1073</span>} <span class="comment">/* split_count(...) */</span></div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span><span class="comment">/*!\fn int free_split_result( char ***tab )</span></div>
<div class="line"><span class="lineno"> 1078</span><span class="comment"> *\brief Free a split result allocated array</span></div>
<div class="line"><span class="lineno"> 1079</span><span class="comment"> *\param tab A pointer to a split result to free</span></div>
<div class="line"><span class="lineno"> 1080</span><span class="comment"> *\return TRUE</span></div>
<div class="line"><span class="lineno"> 1081</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf"> 1082</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf">free_split_result</a>( <span class="keywordtype">char</span> ***tab )</div>
<div class="line"><span class="lineno"> 1083</span>{</div>
<div class="line"><span class="lineno"> 1084</span>    <span class="keywordflow">if</span>( !(*tab) )</div>
<div class="line"><span class="lineno"> 1085</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keywordtype">int</span> it = 0 ;</div>
<div class="line"><span class="lineno"> 1088</span>    <span class="keywordflow">while</span>( (*tab)[ it ] )</div>
<div class="line"><span class="lineno"> 1089</span>    {</div>
<div class="line"><span class="lineno"> 1090</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( (*tab)[ it ] );</div>
<div class="line"><span class="lineno"> 1091</span>        it++;</div>
<div class="line"><span class="lineno"> 1092</span>    }</div>
<div class="line"><span class="lineno"> 1093</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( (*tab) );</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno"> 1096</span>}<span class="comment">/* free_split_result(...)*/</span></div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span> </div>
<div class="line"><span class="lineno"> 1100</span><span class="comment">/*!\fn int nstrcat_ex( N_STR *dest , void *src , NSTRBYTE size , NSTRBYTE blk_size , int resize_flag )</span></div>
<div class="line"><span class="lineno"> 1101</span><span class="comment"> *\brief Append data into N_STR using internal N_STR size and cursor position.</span></div>
<div class="line"><span class="lineno"> 1102</span><span class="comment"> *\param dest The N_STR *destination (accumulator)</span></div>
<div class="line"><span class="lineno"> 1103</span><span class="comment"> *\param src The data to append</span></div>
<div class="line"><span class="lineno"> 1104</span><span class="comment"> *\param size The number of octet of data we want to append in dest</span></div>
<div class="line"><span class="lineno"> 1105</span><span class="comment"> *\param blk_size In case of resizing, this is the increment which will be used to reach ( dest -&gt; written + size )</span></div>
<div class="line"><span class="lineno"> 1106</span><span class="comment"> *\param resize_flag Set it to a positive non zero value to allow resizing, or to zero to forbid resizing</span></div>
<div class="line"><span class="lineno"> 1107</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1108</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7"> 1109</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">nstrcat_ex</a>( N_STR *dest, <span class="keywordtype">void</span> *src, NSTRBYTE size, NSTRBYTE blk_size, <span class="keywordtype">int</span> resize_flag )</div>
<div class="line"><span class="lineno"> 1110</span>{</div>
<div class="line"><span class="lineno"> 1111</span>    <span class="keywordtype">char</span> *ptr = NULL ;</div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordtype">int</span> realloc_flag = 0 ;</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>    <span class="keywordflow">if</span>( !src )</div>
<div class="line"><span class="lineno"> 1115</span>    {</div>
<div class="line"><span class="lineno"> 1116</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;src is NULL&quot;</span> );</div>
<div class="line"><span class="lineno"> 1117</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1118</span>    }</div>
<div class="line"><span class="lineno"> 1119</span> </div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keywordflow">if</span>( dest )</div>
<div class="line"><span class="lineno"> 1121</span>    {</div>
<div class="line"><span class="lineno"> 1122</span>        <span class="keywordflow">if</span>( ( dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> + size ) &gt;= dest <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a>  &amp;&amp; resize_flag == 0 )</div>
<div class="line"><span class="lineno"> 1123</span>        {</div>
<div class="line"><span class="lineno"> 1124</span>            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;%p to %p: not enough space. Resize forbidden. %lld needed, %lld available&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> dest<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> src<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a>  dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> + size + 1<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> dest <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> );</div>
<div class="line"><span class="lineno"> 1125</span>            <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1126</span>        }</div>
<div class="line"><span class="lineno"> 1127</span>    }</div>
<div class="line"><span class="lineno"> 1128</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1129</span>    {</div>
<div class="line"><span class="lineno"> 1130</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;dest is NULL&quot;</span> );</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1132</span>    }</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>    <span class="keywordflow">while</span>( ( dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> + size ) &gt;= dest <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> )</div>
<div class="line"><span class="lineno"> 1135</span>    {</div>
<div class="line"><span class="lineno"> 1136</span>        dest <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> += blk_size ;</div>
<div class="line"><span class="lineno"> 1137</span>        realloc_flag = 1 ;</div>
<div class="line"><span class="lineno"> 1138</span>    }</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>    <span class="keywordflow">if</span>( realloc_flag == 1 )</div>
<div class="line"><span class="lineno"> 1141</span>    {</div>
<div class="line"><span class="lineno"> 1142</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga8b90b68c45c5c6f8d0bfbbabb5dc91ab">Reallocz</a>( dest <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <span class="keywordtype">char</span>, dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a>, dest <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">length</a> );</div>
<div class="line"><span class="lineno"> 1143</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( dest <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>( dest ); <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1144</span>    }</div>
<div class="line"><span class="lineno"> 1145</span> </div>
<div class="line"><span class="lineno"> 1146</span>    ptr = dest <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a> + dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> ;</div>
<div class="line"><span class="lineno"> 1147</span>    memcpy( ptr, src, size );</div>
<div class="line"><span class="lineno"> 1148</span>    dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> += size ;</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>    dest <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a>[ dest <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> ] = <span class="stringliteral">&#39;\0&#39;</span> ;</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno"> 1153</span>} <span class="comment">/* nstrcat_ex( ... ) */</span></div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span> </div>
<div class="line"><span class="lineno"> 1156</span> </div>
<div class="line"><span class="lineno"> 1157</span><span class="comment">/*!\fn int nstrcat( N_STR *dst , N_STR *src )</span></div>
<div class="line"><span class="lineno"> 1158</span><span class="comment"> *\brief Add N_STR *src content to N_STR *dst, resizing it if needed.</span></div>
<div class="line"><span class="lineno"> 1159</span><span class="comment"> *\param dst The N_STR *destination</span></div>
<div class="line"><span class="lineno"> 1160</span><span class="comment"> *\param src The N_STR *source to concatenate into dst</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1162</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga092e6ee522715bd6b3664dbd1081c3a3"> 1163</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga092e6ee522715bd6b3664dbd1081c3a3">nstrcat</a>( N_STR *dst, N_STR *src )</div>
<div class="line"><span class="lineno"> 1164</span>{</div>
<div class="line"><span class="lineno"> 1165</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">nstrcat_ex</a><a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">(</a> dst<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> src <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">data</a><a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> src <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a><a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> src <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">-&gt;</a> <a class="code hl_variable" href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">written</a> + 64<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> 1 <a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">)</a>;</div>
<div class="line"><span class="lineno"> 1166</span>} <span class="comment">/* nstrcat( ... ) */</span></div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span><span class="comment">/*!\fn int nstrcat_bytes_ex( N_STR *dest , void *data , NSTRBYTE size )</span></div>
<div class="line"><span class="lineno"> 1171</span><span class="comment"> *\brief Append data into N_STR using internal N_STR size and cursor position. Wrapper to nstrcat_ex, with resize_flag on and a block size one byte higher than size.</span></div>
<div class="line"><span class="lineno"> 1172</span><span class="comment"> *\param dest The N_STR *destination (accumulator)</span></div>
<div class="line"><span class="lineno"> 1173</span><span class="comment"> *\param data The data to append</span></div>
<div class="line"><span class="lineno"> 1174</span><span class="comment"> *\param size The number of octet of data we want to append in dest</span></div>
<div class="line"><span class="lineno"> 1175</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1176</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15"> 1177</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">nstrcat_bytes_ex</a>( N_STR *dest, <span class="keywordtype">void</span> *data, NSTRBYTE size )</div>
<div class="line"><span class="lineno"> 1178</span>{</div>
<div class="line"><span class="lineno"> 1179</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( dest, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1180</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( data, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1181</span> </div>
<div class="line"><span class="lineno"> 1182</span>    <span class="keywordflow">if</span>( size &lt;= 0 )</div>
<div class="line"><span class="lineno"> 1183</span>    {</div>
<div class="line"><span class="lineno"> 1184</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Could not copy 0 or less (%ld) octet!&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> size );</div>
<div class="line"><span class="lineno"> 1185</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1186</span>    }</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">nstrcat_ex</a><a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">(</a> dest<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> data<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> size<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> size + 64<a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">,</a> 1 <a class="code hl_function" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">)</a>;</div>
<div class="line"><span class="lineno"> 1189</span>} <span class="comment">/* nstrcat_bytes_ex( ... )*/</span></div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span><span class="comment">/*!\fn int nstrcat_bytes( N_STR *dest , void *data )</span></div>
<div class="line"><span class="lineno"> 1193</span><span class="comment"> *\brief Append data into N_STR using internal N_STR size and cursor position. Wrapper to nstrcat_ex, with resize_flag on and a block size one byte higher than size.</span></div>
<div class="line"><span class="lineno"> 1194</span><span class="comment"> *\param dest The N_STR *destination (accumulator)</span></div>
<div class="line"><span class="lineno"> 1195</span><span class="comment"> *\param data The data to append</span></div>
<div class="line"><span class="lineno"> 1196</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1197</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga50dd2820bb9517359112b24abb187801"> 1198</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga50dd2820bb9517359112b24abb187801">nstrcat_bytes</a>( N_STR *dest, <span class="keywordtype">void</span> *data )</div>
<div class="line"><span class="lineno"> 1199</span>{</div>
<div class="line"><span class="lineno"> 1200</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( dest, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1201</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( data, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>    NSTRBYTE size = strlen( (<span class="keywordtype">char</span> *)data );</div>
<div class="line"><span class="lineno"> 1204</span>    <span class="keywordflow">if</span>( size &lt;= 0 )</div>
<div class="line"><span class="lineno"> 1205</span>    {</div>
<div class="line"><span class="lineno"> 1206</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Could not copy 0 or less (%ld) octet!&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> size );</div>
<div class="line"><span class="lineno"> 1207</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1208</span>    }</div>
<div class="line"><span class="lineno"> 1209</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">nstrcat_bytes_ex</a><a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">(</a> dest<a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">,</a> data<a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">,</a> size <a class="code hl_function" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">)</a>;</div>
<div class="line"><span class="lineno"> 1210</span>} <span class="comment">/* nstrcat_bytes( ... )*/</span></div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span> </div>
<div class="line"><span class="lineno"> 1217</span><span class="comment">/*!\fn int write_and_fit_ex( char **dest, NSTRBYTE *size, NSTRBYTE *written, char *src , NSTRBYTE src_size , NSTRBYTE additional_padding )</span></div>
<div class="line"><span class="lineno"> 1218</span><span class="comment"> *\brief concatenate a copy of src of size src_size to dest, starting at dest[ written ], updating written and size variable, allocation of new blocks of (needed size + additional_padding ) if resize is needed. If dest is NULL it will be allocated.</span></div>
<div class="line"><span class="lineno"> 1219</span><span class="comment"> *\param dest The dest string</span></div>
<div class="line"><span class="lineno"> 1220</span><span class="comment"> *\param size The current size, will be updated if written + strlen( dest) &gt; size</span></div>
<div class="line"><span class="lineno"> 1221</span><span class="comment"> *\param written the number of octet added</span></div>
<div class="line"><span class="lineno"> 1222</span><span class="comment"> *\param src The source string to add</span></div>
<div class="line"><span class="lineno"> 1223</span><span class="comment"> *\param additional_padding In case the destination is reallocated, number of additional bytes that will be added (provisionning)</span></div>
<div class="line"><span class="lineno"> 1224</span><span class="comment"> *\return TRUE on success or FALSE on a realloc error</span></div>
<div class="line"><span class="lineno"> 1225</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga6ed24cee257fc28cf2febc8f607cbfb0"> 1226</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga6ed24cee257fc28cf2febc8f607cbfb0">write_and_fit_ex</a>( <span class="keywordtype">char</span> **dest, NSTRBYTE *size, NSTRBYTE *written, <span class="keywordtype">char</span> *src, NSTRBYTE src_size, NSTRBYTE additional_padding )</div>
<div class="line"><span class="lineno"> 1227</span>{</div>
<div class="line"><span class="lineno"> 1228</span>    <span class="keywordtype">char</span> *ptr = NULL ;</div>
<div class="line"><span class="lineno"> 1229</span>    NSTRBYTE needed_size = (*written) + src_size + 1 ;</div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>    <span class="comment">// realloc if needed , also if destination is not allocated</span></div>
<div class="line"><span class="lineno"> 1232</span>    <span class="keywordflow">if</span>( needed_size &gt; (*size) || !(*dest) )</div>
<div class="line"><span class="lineno"> 1233</span>    {</div>
<div class="line"><span class="lineno"> 1234</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;dest will grow from %d to %d&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> (*size)<a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> needed_size + additional_padding );</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>        <span class="comment">// +1 for the \0 , + additional padding for eventual futur concatenation space</span></div>
<div class="line"><span class="lineno"> 1237</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga8b90b68c45c5c6f8d0bfbbabb5dc91ab">Reallocz</a>( (*dest), <span class="keywordtype">char</span>, (*size), needed_size + additional_padding );</div>
<div class="line"><span class="lineno"> 1238</span>        (*size) = needed_size + additional_padding ;</div>
<div class="line"><span class="lineno"> 1239</span>        <span class="keywordflow">if</span>( !(*dest) )</div>
<div class="line"><span class="lineno"> 1240</span>        {</div>
<div class="line"><span class="lineno"> 1241</span>            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(  <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;reallocation error !!!!&quot;</span> );</div>
<div class="line"><span class="lineno"> 1242</span>            <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1243</span>        }</div>
<div class="line"><span class="lineno"> 1244</span>    }</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>    ptr = (*dest) + (*written) ;</div>
<div class="line"><span class="lineno"> 1247</span>    memcpy( ptr, src, src_size );</div>
<div class="line"><span class="lineno"> 1248</span>    (*written) += src_size ;</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>    (*dest)[ (*written) ] = <span class="stringliteral">&#39;\0&#39;</span> ;</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1252</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno"> 1253</span>} <span class="comment">/* write_and_fit_ex( ...) */</span></div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span> </div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span><span class="comment">/*!\fn int write_and_fit( char **dest , NSTRBYTE *size , NSTRBYTE *written , char *src )</span></div>
<div class="line"><span class="lineno"> 1258</span><span class="comment"> *\brief concatenate a copy of src of size strlen( src ) to dest, starting at dest[ written ], updating written and size variable, allocation of new blocks of (needed size + 512) if resize is needed. If dest is NULL it will be allocated.</span></div>
<div class="line"><span class="lineno"> 1259</span><span class="comment"> *\param dest The dest string</span></div>
<div class="line"><span class="lineno"> 1260</span><span class="comment"> *\param size The current size, will be updated if written + strlen( dest) &gt; size</span></div>
<div class="line"><span class="lineno"> 1261</span><span class="comment"> *\param written the number of octet added</span></div>
<div class="line"><span class="lineno"> 1262</span><span class="comment"> *\param src The source string to add</span></div>
<div class="line"><span class="lineno"> 1263</span><span class="comment"> *\return TRUE on success or FALSE on a realloc error</span></div>
<div class="line"><span class="lineno"> 1264</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaf871f697487843d865b54ecd8cfd44a3"> 1265</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaf871f697487843d865b54ecd8cfd44a3">write_and_fit</a>( <span class="keywordtype">char</span> **dest, NSTRBYTE *size, NSTRBYTE *written, <span class="keywordtype">char</span> *src )</div>
<div class="line"><span class="lineno"> 1266</span>{</div>
<div class="line"><span class="lineno"> 1267</span>    <span class="keywordflow">return</span> write_and_fit_ex( dest, size, written, src, strlen( src ), 512 );</div>
<div class="line"><span class="lineno"> 1268</span>} <span class="comment">/* write_and_fit( ...) */</span></div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span><span class="comment">/*!\fn int scan_dir( const char *dir, LIST *result , const int recurse )</span></div>
<div class="line"><span class="lineno"> 1273</span><span class="comment"> *\brief Scan a list of directory and return a list of char *file</span></div>
<div class="line"><span class="lineno"> 1274</span><span class="comment"> *\param dir The directory to scan</span></div>
<div class="line"><span class="lineno"> 1275</span><span class="comment"> *\param result A pointer to a valid LIST for the results</span></div>
<div class="line"><span class="lineno"> 1276</span><span class="comment"> *\param recurse Recursive search if TRUE, directory only if FALSE</span></div>
<div class="line"><span class="lineno"> 1277</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1278</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaa3becc1e523b47d5d53bbbf6b1603520"> 1279</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaa3becc1e523b47d5d53bbbf6b1603520">scan_dir</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *dir, LIST *result, <span class="keyword">const</span> <span class="keywordtype">int</span> recurse )</div>
<div class="line"><span class="lineno"> 1280</span>{</div>
<div class="line"><span class="lineno"> 1281</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">scan_dir_ex</a><a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">(</a> dir<a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">,</a> <span class="stringliteral">&quot;*&quot;</span><a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">,</a> result<a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">,</a> recurse<a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">,</a> 0 <a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">)</a>;</div>
<div class="line"><span class="lineno"> 1282</span>}</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span> </div>
<div class="line"><span class="lineno"> 1285</span> </div>
<div class="line"><span class="lineno"> 1286</span><span class="comment">/*!\fn int scan_dir_ex( const char *dir, const char *pattern , LIST *result , const int recurse , const int mode )</span></div>
<div class="line"><span class="lineno"> 1287</span><span class="comment"> *\brief Scan a list of directory and return a list of char *file</span></div>
<div class="line"><span class="lineno"> 1288</span><span class="comment"> *\param dir The directory to scan</span></div>
<div class="line"><span class="lineno"> 1289</span><span class="comment"> *\param pattern Pattern that files must follow to figure in the list</span></div>
<div class="line"><span class="lineno"> 1290</span><span class="comment"> *\param result A pointer to a valid LIST for the results</span></div>
<div class="line"><span class="lineno"> 1291</span><span class="comment"> *\param recurse Recursive search if TRUE, directory only if FALSE</span></div>
<div class="line"><span class="lineno"> 1292</span><span class="comment"> *\param mode 0 for a list of char* , 1 for a list of N_STR *</span></div>
<div class="line"><span class="lineno"> 1293</span><span class="comment"> *\return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1294</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf"> 1295</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">scan_dir_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *dir, <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, LIST *result, <span class="keyword">const</span> <span class="keywordtype">int</span> recurse, <span class="keyword">const</span> <span class="keywordtype">int</span> mode )</div>
<div class="line"><span class="lineno"> 1296</span>{</div>
<div class="line"><span class="lineno"> 1297</span>    DIR *dp = NULL ;</div>
<div class="line"><span class="lineno"> 1298</span>    <span class="keyword">struct</span> dirent *entry = NULL;</div>
<div class="line"><span class="lineno"> 1299</span>    <span class="keyword">struct</span> stat statbuf;</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>    <span class="keywordflow">if</span>( !result )</div>
<div class="line"><span class="lineno"> 1302</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>    <span class="keywordflow">if</span>( ( dp = opendir( dir ) ) == NULL)</div>
<div class="line"><span class="lineno"> 1305</span>    {</div>
<div class="line"><span class="lineno"> 1306</span>        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;cannot open directory: %s&quot;</span><a class="code hl_function" href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">,</a> dir );</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">return</span> FALSE ;</div>
<div class="line"><span class="lineno"> 1308</span>    }</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>    N_STR *newname = NULL ;</div>
<div class="line"><span class="lineno"> 1311</span>    <span class="keywordflow">while</span>( ( entry = readdir( dp ) ) != NULL )</div>
<div class="line"><span class="lineno"> 1312</span>    {</div>
<div class="line"><span class="lineno"> 1313</span>        <a class="code hl_define" href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">nstrprintf</a>( newname, <span class="stringliteral">&quot;%s/%s&quot;</span>, dir, entry -&gt; d_name );</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>        <span class="keywordflow">if</span>( stat( newname -&gt; data, &amp;statbuf ) &gt;= 0 )</div>
<div class="line"><span class="lineno"> 1316</span>        {</div>
<div class="line"><span class="lineno"> 1317</span>            <span class="keywordflow">if</span>( S_ISDIR( statbuf . st_mode ) != 0 )</div>
<div class="line"><span class="lineno"> 1318</span>            {</div>
<div class="line"><span class="lineno"> 1319</span>                <span class="keywordflow">if</span>( strcmp( <span class="stringliteral">&quot;.&quot;</span>, entry -&gt; d_name ) == 0 || strcmp( <span class="stringliteral">&quot;..&quot;</span>, entry -&gt; d_name ) == 0 )</div>
<div class="line"><span class="lineno"> 1320</span>                {</div>
<div class="line"><span class="lineno"> 1321</span>                    <a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a>( &amp;newname );</div>
<div class="line"><span class="lineno"> 1322</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1323</span>                }</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>                <span class="comment">/* Recurse */</span></div>
<div class="line"><span class="lineno"> 1326</span>                <span class="keywordflow">if</span>( recurse != FALSE )</div>
<div class="line"><span class="lineno"> 1327</span>                {</div>
<div class="line"><span class="lineno"> 1328</span>                    <span class="keywordflow">if</span>( scan_dir_ex( newname -&gt; data, pattern, result, recurse, mode ) != TRUE )</div>
<div class="line"><span class="lineno"> 1329</span>                    {</div>
<div class="line"><span class="lineno"> 1330</span>                        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;scan_dir_ex( %s , %s , %p , %d , %d ) returned FALSE !&quot;</span>, newname -&gt; data, pattern, result, recurse, mode );</div>
<div class="line"><span class="lineno"> 1331</span>                    }</div>
<div class="line"><span class="lineno"> 1332</span>                }</div>
<div class="line"><span class="lineno"> 1333</span>                <a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a>( &amp;newname );</div>
<div class="line"><span class="lineno"> 1334</span>                <span class="keywordflow">continue</span> ;</div>
<div class="line"><span class="lineno"> 1335</span>            }</div>
<div class="line"><span class="lineno"> 1336</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( S_ISREG( statbuf . st_mode ) != 0 )</div>
<div class="line"><span class="lineno"> 1337</span>            {</div>
<div class="line"><span class="lineno"> 1338</span>                <span class="keywordflow">if</span>( wildmatcase( newname -&gt; data, pattern ) == TRUE )</div>
<div class="line"><span class="lineno"> 1339</span>                {</div>
<div class="line"><span class="lineno"> 1340</span>                    <span class="keywordflow">if</span>( mode == 0 )</div>
<div class="line"><span class="lineno"> 1341</span>                    {</div>
<div class="line"><span class="lineno"> 1342</span>                        <span class="keywordtype">char</span> *file = strdup( newname -&gt; data );</div>
<div class="line"><span class="lineno"> 1343</span>                        <span class="keywordflow">if</span>( file )</div>
<div class="line"><span class="lineno"> 1344</span>                        {</div>
<div class="line"><span class="lineno"> 1345</span>                            list_push( result, file, &amp;free );</div>
<div class="line"><span class="lineno"> 1346</span>                        }</div>
<div class="line"><span class="lineno"> 1347</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1348</span>                        {</div>
<div class="line"><span class="lineno"> 1349</span>                            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>( <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Error adding %s/%s to list&quot;</span>, dir, entry -&gt; d_name  );</div>
<div class="line"><span class="lineno"> 1350</span>                        }</div>
<div class="line"><span class="lineno"> 1351</span>                    }</div>
<div class="line"><span class="lineno"> 1352</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mode == 1 )</div>
<div class="line"><span class="lineno"> 1353</span>                    {</div>
<div class="line"><span class="lineno"> 1354</span>                        list_push( result, newname, &amp;free_nstr_ptr );</div>
<div class="line"><span class="lineno"> 1355</span>                        newname = NULL ;</div>
<div class="line"><span class="lineno"> 1356</span>                    }</div>
<div class="line"><span class="lineno"> 1357</span>                }</div>
<div class="line"><span class="lineno"> 1358</span>            }</div>
<div class="line"><span class="lineno"> 1359</span>        }</div>
<div class="line"><span class="lineno"> 1360</span>        <span class="keywordflow">if</span>( newname )</div>
<div class="line"><span class="lineno"> 1361</span>            <a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a>( &amp;newname );</div>
<div class="line"><span class="lineno"> 1362</span>    }</div>
<div class="line"><span class="lineno"> 1363</span>    closedir( dp );</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno"> 1365</span>} <span class="comment">/*scan_dir(...) */</span></div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span> </div>
<div class="line"><span class="lineno"> 1369</span><span class="comment">/*!\fn int wildmat(register const char *text, register const char *p)</span></div>
<div class="line"><span class="lineno"> 1370</span><span class="comment"> *\brief Written by Rich Salz rsalz at osf.org, refurbished by me. Wildcard pattern matching .</span></div>
<div class="line"><span class="lineno"> 1371</span><span class="comment"> *\param text The source text to search</span></div>
<div class="line"><span class="lineno"> 1372</span><span class="comment"> *\param p The text to search, with wildcards</span></div>
<div class="line"><span class="lineno"> 1373</span><span class="comment"> *\return return TRUE, FALSE, or WILDMAT_ABORT.</span></div>
<div class="line"><span class="lineno"> 1374</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85"> 1375</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">wildmat</a>(<span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *p)</div>
<div class="line"><span class="lineno"> 1376</span>{</div>
<div class="line"><span class="lineno"> 1377</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> last = 0 ;</div>
<div class="line"><span class="lineno"> 1378</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> matched = 0;</div>
<div class="line"><span class="lineno"> 1379</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> reverse = 0;</div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>    <span class="keywordflow">for</span> ( ; *p; text++, p++)</div>
<div class="line"><span class="lineno"> 1382</span>    {</div>
<div class="line"><span class="lineno"> 1383</span>        <span class="keywordflow">if</span> (*text == <span class="stringliteral">&#39;\0&#39;</span> &amp;&amp; *p != <span class="stringliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno"> 1384</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">WILDMAT_ABORT</a>;</div>
<div class="line"><span class="lineno"> 1385</span>        <span class="keywordflow">switch</span> (*p)</div>
<div class="line"><span class="lineno"> 1386</span>        {</div>
<div class="line"><span class="lineno"> 1387</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;\\&#39;</span>:</div>
<div class="line"><span class="lineno"> 1388</span>            <span class="comment">/* Literal match with following character. */</span></div>
<div class="line"><span class="lineno"> 1389</span>            p++;</div>
<div class="line"><span class="lineno"> 1390</span>        <span class="comment">/* FALLTHROUGH */</span></div>
<div class="line"><span class="lineno"> 1391</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1392</span>            <span class="keywordflow">if</span> (*text != *p)</div>
<div class="line"><span class="lineno"> 1393</span>                <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno"> 1394</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1395</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;?&#39;</span>:</div>
<div class="line"><span class="lineno"> 1396</span>            <span class="comment">/* Match anything. */</span></div>
<div class="line"><span class="lineno"> 1397</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1398</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;*&#39;</span>:</div>
<div class="line"><span class="lineno"> 1399</span>            <span class="keywordflow">while</span> (*++p == <span class="stringliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno"> 1400</span>                <span class="comment">/* Consecutive stars act just like one. */</span></div>
<div class="line"><span class="lineno"> 1401</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1402</span>            <span class="keywordflow">if</span> (*p == <span class="stringliteral">&#39;\0&#39;</span>)</div>
<div class="line"><span class="lineno"> 1403</span>                <span class="comment">/* Trailing star matches everything. */</span></div>
<div class="line"><span class="lineno"> 1404</span>                <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno"> 1405</span>            <span class="keywordflow">while</span> (*text)</div>
<div class="line"><span class="lineno"> 1406</span>                <span class="keywordflow">if</span> ((matched = <a class="code hl_function" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">wildmat</a><a class="code hl_function" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">(</a>text++<a class="code hl_function" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">,</a> p<a class="code hl_function" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">)</a>) != FALSE)</div>
<div class="line"><span class="lineno"> 1407</span>                    <span class="keywordflow">return</span> matched;</div>
<div class="line"><span class="lineno"> 1408</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">WILDMAT_ABORT</a>;</div>
<div class="line"><span class="lineno"> 1409</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;[&#39;</span>:</div>
<div class="line"><span class="lineno"> 1410</span>            reverse = p[1] == <a class="code hl_define" href="group___n___s_t_r.html#ga868c667912754efcf68370278b0aaee1">WILDMAT_NEGATE_CLASS</a> ? TRUE : FALSE;</div>
<div class="line"><span class="lineno"> 1411</span>            <span class="keywordflow">if</span> (reverse)</div>
<div class="line"><span class="lineno"> 1412</span>                <span class="comment">/* Inverted character class. */</span></div>
<div class="line"><span class="lineno"> 1413</span>                p++;</div>
<div class="line"><span class="lineno"> 1414</span>            matched = FALSE;</div>
<div class="line"><span class="lineno"> 1415</span>            <span class="keywordflow">if</span> (p[1] == <span class="stringliteral">&#39;]&#39;</span> || p[1] == <span class="stringliteral">&#39;-&#39;</span>)</div>
<div class="line"><span class="lineno"> 1416</span>                <span class="keywordflow">if</span> (*++p == *text)</div>
<div class="line"><span class="lineno"> 1417</span>                    matched = TRUE;</div>
<div class="line"><span class="lineno"> 1418</span>            <span class="keywordflow">for</span> (last = *p; *++p &amp;&amp; *p != <span class="stringliteral">&#39;]&#39;</span>; last = *p)</div>
<div class="line"><span class="lineno"> 1419</span>                <span class="comment">/* This next line requires a good C compiler. */</span></div>
<div class="line"><span class="lineno"> 1420</span>                <span class="keywordflow">if</span> (*p == <span class="stringliteral">&#39;-&#39;</span> &amp;&amp; p[1] != <span class="stringliteral">&#39;]&#39;</span></div>
<div class="line"><span class="lineno"> 1421</span>                        ? *text &lt;= *++p &amp;&amp; *text &gt;= last : *text == *p)</div>
<div class="line"><span class="lineno"> 1422</span>                    matched = TRUE;</div>
<div class="line"><span class="lineno"> 1423</span>            <span class="keywordflow">if</span> (matched == reverse)</div>
<div class="line"><span class="lineno"> 1424</span>                <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno"> 1425</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1426</span>        }</div>
<div class="line"><span class="lineno"> 1427</span>    }</div>
<div class="line"><span class="lineno"> 1428</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">WILDMAT_MATCH_TAR_PATTERN</span></div>
<div class="line"><span class="lineno"> 1429</span>    <span class="keywordflow">if</span> (*text == <span class="stringliteral">&#39;/&#39;</span>)</div>
<div class="line"><span class="lineno"> 1430</span>        <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno"> 1431</span><span class="preprocessor">#</span><span class="preprocessor">endif</span> <span class="comment">/* MATCH_TAR_ATTERN */</span></div>
<div class="line"><span class="lineno"> 1432</span>    <span class="keywordflow">return</span> *text == <span class="stringliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1433</span>} <span class="comment">/* wildmatch(...) */</span></div>
<div class="line"><span class="lineno"> 1434</span> </div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span> </div>
<div class="line"><span class="lineno"> 1437</span><span class="comment">/*!\fn int wildmatcase( register const char *text , register const char *p )</span></div>
<div class="line"><span class="lineno"> 1438</span><span class="comment"> *\brief Written by Rich Salz rsalz at osf.org, refurbished by me. Wildcard pattern matching case insensitive.</span></div>
<div class="line"><span class="lineno"> 1439</span><span class="comment"> *\param text The source text to search</span></div>
<div class="line"><span class="lineno"> 1440</span><span class="comment"> *\param p The text to search, with wildcards</span></div>
<div class="line"><span class="lineno"> 1441</span><span class="comment"> *\return return TRUE, FALSE, or WILDMAT_ABORT.</span></div>
<div class="line"><span class="lineno"> 1442</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2"> 1443</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">wildmatcase</a>(<span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *p)</div>
<div class="line"><span class="lineno"> 1444</span>{</div>
<div class="line"><span class="lineno"> 1445</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> last;</div>
<div class="line"><span class="lineno"> 1446</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> matched;</div>
<div class="line"><span class="lineno"> 1447</span>    <span class="keyword">register</span> <span class="keywordtype">int</span> reverse;</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>    <span class="keywordflow">for</span> ( ; *p; text++, p++)</div>
<div class="line"><span class="lineno"> 1450</span>    {</div>
<div class="line"><span class="lineno"> 1451</span>        <span class="keywordflow">if</span> (*text == <span class="stringliteral">&#39;\0&#39;</span> &amp;&amp; *p != <span class="stringliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno"> 1452</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">WILDMAT_ABORT</a>;</div>
<div class="line"><span class="lineno"> 1453</span>        <span class="keywordflow">switch</span> (*p)</div>
<div class="line"><span class="lineno"> 1454</span>        {</div>
<div class="line"><span class="lineno"> 1455</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;\\&#39;</span>:</div>
<div class="line"><span class="lineno"> 1456</span>            <span class="comment">/* Literal match with following character. */</span></div>
<div class="line"><span class="lineno"> 1457</span>            p++;</div>
<div class="line"><span class="lineno"> 1458</span>        <span class="comment">/* FALLTHROUGH */</span></div>
<div class="line"><span class="lineno"> 1459</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1460</span>            <span class="keywordflow">if</span> (toupper(*text) != toupper(*p))</div>
<div class="line"><span class="lineno"> 1461</span>                <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno"> 1462</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1463</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;?&#39;</span>:</div>
<div class="line"><span class="lineno"> 1464</span>            <span class="comment">/* Match anything. */</span></div>
<div class="line"><span class="lineno"> 1465</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1466</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;*&#39;</span>:</div>
<div class="line"><span class="lineno"> 1467</span>            <span class="keywordflow">while</span> (*++p == <span class="stringliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno"> 1468</span>                <span class="comment">/* Consecutive stars act just like one. */</span></div>
<div class="line"><span class="lineno"> 1469</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1470</span>            <span class="keywordflow">if</span> (*p == <span class="stringliteral">&#39;\0&#39;</span>)</div>
<div class="line"><span class="lineno"> 1471</span>                <span class="comment">/* Trailing star matches everything. */</span></div>
<div class="line"><span class="lineno"> 1472</span>                <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno"> 1473</span>            <span class="keywordflow">while</span> (*text)</div>
<div class="line"><span class="lineno"> 1474</span>                <span class="keywordflow">if</span> ((matched = <a class="code hl_function" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">wildmatcase</a><a class="code hl_function" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">(</a>text++<a class="code hl_function" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">,</a> p<a class="code hl_function" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">)</a>) != FALSE)</div>
<div class="line"><span class="lineno"> 1475</span>                    <span class="keywordflow">return</span> matched;</div>
<div class="line"><span class="lineno"> 1476</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">WILDMAT_ABORT</a>;</div>
<div class="line"><span class="lineno"> 1477</span>        <span class="keywordflow">case</span> <span class="stringliteral">&#39;[&#39;</span>:</div>
<div class="line"><span class="lineno"> 1478</span>            reverse = p[1] == <a class="code hl_define" href="group___n___s_t_r.html#ga868c667912754efcf68370278b0aaee1">WILDMAT_NEGATE_CLASS</a> ? TRUE : FALSE;</div>
<div class="line"><span class="lineno"> 1479</span>            <span class="keywordflow">if</span> (reverse)</div>
<div class="line"><span class="lineno"> 1480</span>                <span class="comment">/* Inverted character class. */</span></div>
<div class="line"><span class="lineno"> 1481</span>                p++;</div>
<div class="line"><span class="lineno"> 1482</span>            matched = FALSE;</div>
<div class="line"><span class="lineno"> 1483</span>            <span class="keywordflow">if</span> (p[1] == <span class="stringliteral">&#39;]&#39;</span> || p[1] == <span class="stringliteral">&#39;-&#39;</span>)</div>
<div class="line"><span class="lineno"> 1484</span>                <span class="keywordflow">if</span> (toupper(*++p) == toupper(*text))</div>
<div class="line"><span class="lineno"> 1485</span>                    matched = TRUE;</div>
<div class="line"><span class="lineno"> 1486</span>            <span class="keywordflow">for</span> (last = toupper(*p); *++p &amp;&amp; *p != <span class="stringliteral">&#39;]&#39;</span>; last = toupper(*p))</div>
<div class="line"><span class="lineno"> 1487</span>                <span class="keywordflow">if</span> (*p == <span class="stringliteral">&#39;-&#39;</span> &amp;&amp; p[1] != <span class="stringliteral">&#39;]&#39;</span></div>
<div class="line"><span class="lineno"> 1488</span>                        ? toupper(*text) &lt;= toupper(*++p) &amp;&amp; toupper(*text) &gt;= last : toupper(*text) == toupper(*p))</div>
<div class="line"><span class="lineno"> 1489</span>                    matched = TRUE;</div>
<div class="line"><span class="lineno"> 1490</span>            <span class="keywordflow">if</span> (matched == reverse)</div>
<div class="line"><span class="lineno"> 1491</span>                <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno"> 1492</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1493</span>        }</div>
<div class="line"><span class="lineno"> 1494</span>    }</div>
<div class="line"><span class="lineno"> 1495</span><span class="preprocessor">#</span><span class="preprocessor">ifdef</span> <span class="preprocessor">WILDMAT_MATCH_TAR_PATTERN</span></div>
<div class="line"><span class="lineno"> 1496</span>    <span class="keywordflow">if</span> (*text == <span class="stringliteral">&#39;/&#39;</span>)</div>
<div class="line"><span class="lineno"> 1497</span>        <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno"> 1498</span><span class="preprocessor">#</span><span class="preprocessor">endif</span> <span class="comment">/* MATCH_TAR_ATTERN */</span></div>
<div class="line"><span class="lineno"> 1499</span>    <span class="keywordflow">return</span> *text == <span class="stringliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1500</span>} <span class="comment">/* wildmatcase(...) */</span></div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span> </div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span><span class="comment">/*!\fn char *str_replace ( const char *string, const char *substr, const char *replacement )</span></div>
<div class="line"><span class="lineno"> 1506</span><span class="comment"> *\brief Replace &quot;substr&quot; by &quot;replacement&quot; inside string</span></div>
<div class="line"><span class="lineno"> 1507</span><span class="comment"> taken from http://coding.debuntu.org/c-implementing-str_replace-replace-all-occurrences-substring</span></div>
<div class="line"><span class="lineno"> 1508</span><span class="comment"> By Chantra</span></div>
<div class="line"><span class="lineno"> 1509</span><span class="comment"> *\param string Original string to modify</span></div>
<div class="line"><span class="lineno"> 1510</span><span class="comment"> *\param substr String to search</span></div>
<div class="line"><span class="lineno"> 1511</span><span class="comment"> *\param replacement Substitution string</span></div>
<div class="line"><span class="lineno"> 1512</span><span class="comment"> *\return A copy of the sustituted string or NULL</span></div>
<div class="line"><span class="lineno"> 1513</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga88e865dd8e64f3f3504a99d4d0961c37"> 1514</a></span><span class="keywordtype">char</span> *<a class="code hl_function" href="group___n___s_t_r.html#ga88e865dd8e64f3f3504a99d4d0961c37">str_replace</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span> *string, <span class="keyword">const</span> <span class="keywordtype">char</span> *substr, <span class="keyword">const</span> <span class="keywordtype">char</span> *replacement )</div>
<div class="line"><span class="lineno"> 1515</span>{</div>
<div class="line"><span class="lineno"> 1516</span>    <span class="keywordtype">char</span> *tok = NULL;</div>
<div class="line"><span class="lineno"> 1517</span>    <span class="keywordtype">char</span> *newstr = NULL;</div>
<div class="line"><span class="lineno"> 1518</span>    <span class="keywordtype">char</span> *oldstr = NULL;</div>
<div class="line"><span class="lineno"> 1519</span>    <span class="keywordtype">char</span> *head = NULL;</div>
<div class="line"><span class="lineno"> 1520</span> </div>
<div class="line"><span class="lineno"> 1521</span>    <span class="comment">/* if either substr or replacement is NULL, duplicate string a let caller handle it */</span></div>
<div class="line"><span class="lineno"> 1522</span>    <span class="keywordflow">if</span> ( substr == NULL || replacement == NULL )</div>
<div class="line"><span class="lineno"> 1523</span>        <span class="keywordflow">return</span> strdup (string);</div>
<div class="line"><span class="lineno"> 1524</span>    newstr = strdup (string);</div>
<div class="line"><span class="lineno"> 1525</span>    head = newstr;</div>
<div class="line"><span class="lineno"> 1526</span>    <span class="keywordflow">while</span> ( (tok = strstr ( head, substr )))</div>
<div class="line"><span class="lineno"> 1527</span>    {</div>
<div class="line"><span class="lineno"> 1528</span>        oldstr = newstr;</div>
<div class="line"><span class="lineno"> 1529</span>        <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>( newstr, <span class="keywordtype">char</span>, strlen ( oldstr ) - strlen ( substr ) + strlen ( replacement ) + 8 );</div>
<div class="line"><span class="lineno"> 1530</span>        <span class="comment">/*failed to alloc mem, free old string and return NULL */</span></div>
<div class="line"><span class="lineno"> 1531</span>        <span class="keywordflow">if</span> ( newstr == NULL )</div>
<div class="line"><span class="lineno"> 1532</span>        {</div>
<div class="line"><span class="lineno"> 1533</span>            free (oldstr);</div>
<div class="line"><span class="lineno"> 1534</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1535</span>        }</div>
<div class="line"><span class="lineno"> 1536</span>        memcpy ( newstr, oldstr, tok - oldstr );</div>
<div class="line"><span class="lineno"> 1537</span>        memcpy ( newstr + (tok - oldstr), replacement, strlen ( replacement ) );</div>
<div class="line"><span class="lineno"> 1538</span>        memcpy ( newstr + (tok - oldstr) + strlen( replacement ), tok + strlen ( substr ), strlen ( oldstr ) - strlen ( substr ) - ( tok - oldstr ) );</div>
<div class="line"><span class="lineno"> 1539</span>        memset ( newstr + strlen ( oldstr ) - strlen ( substr ) + strlen ( replacement ), 0, 1 );</div>
<div class="line"><span class="lineno"> 1540</span>        <span class="comment">/* move back head right after the last replacement */</span></div>
<div class="line"><span class="lineno"> 1541</span>        head = newstr + (tok - oldstr) + strlen( replacement );</div>
<div class="line"><span class="lineno"> 1542</span>        free (oldstr);</div>
<div class="line"><span class="lineno"> 1543</span>    }</div>
<div class="line"><span class="lineno"> 1544</span>    <span class="keywordflow">return</span> newstr;</div>
<div class="line"><span class="lineno"> 1545</span>}</div>
<div class="line"><span class="lineno"> 1546</span> </div>
<div class="line"><span class="lineno"> 1547</span><span class="comment">/*!\fn int str_sanitize_ex( char *string, const NSTRBYTE string_len, const char *mask, const NSTRBYTE masklen, const char replacement )</span></div>
<div class="line"><span class="lineno"> 1548</span><span class="comment"> * \brief clean a string by replacing evil characteres</span></div>
<div class="line"><span class="lineno"> 1549</span><span class="comment"> * \param string The string to change</span></div>
<div class="line"><span class="lineno"> 1550</span><span class="comment"> * \param string_len Size of the data to treat</span></div>
<div class="line"><span class="lineno"> 1551</span><span class="comment"> * \param mask The caracters to kill</span></div>
<div class="line"><span class="lineno"> 1552</span><span class="comment"> * \param masklen size of mask</span></div>
<div class="line"><span class="lineno"> 1553</span><span class="comment"> * \param replacement replacement for mask</span></div>
<div class="line"><span class="lineno"> 1554</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1555</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#ga2386f438e79df60930987a6102e87934"> 1556</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#ga2386f438e79df60930987a6102e87934">str_sanitize_ex</a>( <span class="keywordtype">char</span> *string, <span class="keyword">const</span> NSTRBYTE string_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *mask, <span class="keyword">const</span> NSTRBYTE masklen, <span class="keyword">const</span> <span class="keywordtype">char</span> replacement )</div>
<div class="line"><span class="lineno"> 1557</span>{</div>
<div class="line"><span class="lineno"> 1558</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( string, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1559</span>    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a>( mask, <span class="keywordflow">return</span> FALSE );</div>
<div class="line"><span class="lineno"> 1560</span> </div>
<div class="line"><span class="lineno"> 1561</span>    NSTRBYTE it = 0 ;</div>
<div class="line"><span class="lineno"> 1562</span>    <span class="keywordflow">for</span>( it = 0 ; it &lt; string_len ; it ++ )</div>
<div class="line"><span class="lineno"> 1563</span>    {</div>
<div class="line"><span class="lineno"> 1564</span>        NSTRBYTE mask_it = 0 ;</div>
<div class="line"><span class="lineno"> 1565</span>        <span class="keywordflow">while</span>( mask_it&lt;masklen &amp;&amp; mask[mask_it]!=<span class="stringliteral">&#39;\0&#39;</span>)</div>
<div class="line"><span class="lineno"> 1566</span>        {</div>
<div class="line"><span class="lineno"> 1567</span>            <span class="keywordflow">if</span>( string[ it ] == mask[ mask_it ] )</div>
<div class="line"><span class="lineno"> 1568</span>                string[ it ] = replacement ;</div>
<div class="line"><span class="lineno"> 1569</span>            mask_it ++ ;</div>
<div class="line"><span class="lineno"> 1570</span>        }</div>
<div class="line"><span class="lineno"> 1571</span>    }</div>
<div class="line"><span class="lineno"> 1572</span>    <span class="keywordflow">return</span> TRUE ;</div>
<div class="line"><span class="lineno"> 1573</span>}</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span> </div>
<div class="line"><span class="lineno"> 1576</span><span class="comment">/*!\fn int str_sanitize( char *string, const char *mask, const char replacement )</span></div>
<div class="line"><span class="lineno"> 1577</span><span class="comment"> * \brief clean a string by replacing evil characteres</span></div>
<div class="line"><span class="lineno"> 1578</span><span class="comment"> * \param string The string to change</span></div>
<div class="line"><span class="lineno"> 1579</span><span class="comment"> * \param mask The caracters to kill</span></div>
<div class="line"><span class="lineno"> 1580</span><span class="comment"> * \param replacement replacement for mask</span></div>
<div class="line"><span class="lineno"> 1581</span><span class="comment"> * \return TRUE or FALSE</span></div>
<div class="line"><span class="lineno"> 1582</span><span class="comment"> */</span></div>
<div class="line"><span class="lineno"><a class="line" href="group___n___s_t_r.html#gaaf432cb6330353e306e51ed3d6e9f417"> 1583</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="group___n___s_t_r.html#gaaf432cb6330353e306e51ed3d6e9f417">str_sanitize</a>( <span class="keywordtype">char</span> *string, <span class="keyword">const</span> <span class="keywordtype">char</span> *mask, <span class="keyword">const</span> <span class="keywordtype">char</span> replacement )</div>
<div class="line"><span class="lineno"> 1584</span>{</div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">return</span> str_sanitize_ex( string, strlen( string ), mask, strlen( mask ), replacement );</div>
<div class="line"><span class="lineno"> 1586</span>}</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span><span class="preprocessor">#</span><span class="preprocessor">endif</span> <span class="comment">/* #ifndef NOSTR */</span></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga079dc7a6a7e7c54bb714d8bb2afdd022"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga079dc7a6a7e7c54bb714d8bb2afdd022">FreeNoLog</a></div><div class="ttdeci">#define FreeNoLog(__ptr)</div><div class="ttdoc">Free Handler without log.</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00252">n_common.h:252</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga46bf052fc99248347a1dcf89bc0757c6"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a></div><div class="ttdeci">#define Malloc(__ptr, __struct, __size)</div><div class="ttdoc">Malloc Handler to get errors and set to 0.</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00180">n_common.h:180</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga4ecf5d80299a4ca1dc13c3a19610db11"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga4ecf5d80299a4ca1dc13c3a19610db11">__n_assert</a></div><div class="ttdeci">#define __n_assert(__ptr, __ret)</div><div class="ttdoc">macro to assert things</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00260">n_common.h:260</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga55b9404f7bc9d3a3ead2f0103331a87e"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga55b9404f7bc9d3a3ead2f0103331a87e">_str</a></div><div class="ttdeci">#define _str(__PTR)</div><div class="ttdoc">define true</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00169">n_common.h:169</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga8b90b68c45c5c6f8d0bfbbabb5dc91ab"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga8b90b68c45c5c6f8d0bfbbabb5dc91ab">Reallocz</a></div><div class="ttdeci">#define Reallocz(__ptr, __struct, __old_size, __size)</div><div class="ttdoc">Realloc + zero new memory zone Handler to get errors.</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00223">n_common.h:223</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_gae62e40d702e99a7760ba1de7451dff51"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a></div><div class="ttdeci">#define Free(__ptr)</div><div class="ttdoc">Free Handler to get errors.</div><div class="ttdef"><b>Definition:</b> <a href="n__common_8h_source.html#l00240">n_common.h:240</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga61355655c6d490cdf201afdfc340df4b"><div class="ttname"><a href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a></div><div class="ttdeci">#define n_log(__LEVEL__,...)</div><div class="ttdoc">Logging function wrapper to get line and func.</div><div class="ttdef"><b>Definition:</b> <a href="n__log_8h_source.html#l00073">n_log.h:73</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdoc">debug-level messages</div><div class="ttdef"><b>Definition:</b> <a href="n__log_8h_source.html#l00065">n_log.h:65</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga96fad55b3f5adf08c39e4c877cf185e3"><div class="ttname"><a href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a></div><div class="ttdeci">#define LOG_ERR</div><div class="ttdoc">error conditions</div><div class="ttdef"><b>Definition:</b> <a href="n__log_8h_source.html#l00057">n_log.h:57</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_gafbbbfcb9063b9f1454a499dbf98f7a56"><div class="ttname"><a href="group___l_o_g.html#gafbbbfcb9063b9f1454a499dbf98f7a56">_n_log</a></div><div class="ttdeci">void _n_log(int level, const char *file, const char *func, int line, const char *format,...)</div><div class="ttdoc">Logging function.</div><div class="ttdef"><b>Definition:</b> <a href="n__log_8c_source.html#l00216">n_log.c:216</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga04812d120313b73e6e22493cad0ec75d"><div class="ttname"><a href="group___n___s_t_r.html#ga04812d120313b73e6e22493cad0ec75d">str_to_long_long</a></div><div class="ttdeci">int str_to_long_long(const char *s, long long int *i, const int base)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00729">n_str.c:729</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga0484a44a99d2ad895e2c111b34ea5e39"><div class="ttname"><a href="group___n___s_t_r.html#ga0484a44a99d2ad895e2c111b34ea5e39">strcpy_u</a></div><div class="ttdeci">int strcpy_u(char *from, char *to, NSTRBYTE to_size, char split, NSTRBYTE *it)</div><div class="ttdoc">Copy from start to dest until from[ iterator ] == split.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00941">n_str.c:941</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga092e6ee522715bd6b3664dbd1081c3a3"><div class="ttname"><a href="group___n___s_t_r.html#ga092e6ee522715bd6b3664dbd1081c3a3">nstrcat</a></div><div class="ttdeci">int nstrcat(N_STR *dst, N_STR *src)</div><div class="ttdoc">Add N_STR *src content to N_STR *dst, resizing it if needed.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01163">n_str.c:1163</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga096b9e0a33d6e0f97e26c86b96415330"><div class="ttname"><a href="group___n___s_t_r.html#ga096b9e0a33d6e0f97e26c86b96415330">trim_nocopy</a></div><div class="ttdeci">char * trim_nocopy(char *s)</div><div class="ttdoc">trim and zero end the string, WARNING: keep and original pointer to delete the string correctly</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00118">n_str.c:118</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga0a864a4ce4997389f2e5e2e16c51a30a"><div class="ttname"><a href="group___n___s_t_r.html#ga0a864a4ce4997389f2e5e2e16c51a30a">free_nstr_ptr</a></div><div class="ttdeci">void free_nstr_ptr(void *ptr)</div><div class="ttdoc">Free a N_STR pointer structure.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00049">n_str.c:49</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga113e906d03374ac38e441f1df44095fb"><div class="ttname"><a href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a></div><div class="ttdeci">#define free_nstr(__ptr)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00200">n_str.h:200</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga194b81c0709d24aef9b6f7e8635d3966"><div class="ttname"><a href="group___n___s_t_r.html#ga194b81c0709d24aef9b6f7e8635d3966">split_count</a></div><div class="ttdeci">int split_count(char **split_result)</div><div class="ttdoc">Count split elements.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01062">n_str.c:1062</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga1c1f4062c727970a68bfd932c3fabcd5"><div class="ttname"><a href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">nstrprintf</a></div><div class="ttdeci">#define nstrprintf(__nstr_var,...)</div><div class="ttdoc">Macro to quickly allocate and sprintf to N_STR *.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00097">n_str.h:97</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga2386f438e79df60930987a6102e87934"><div class="ttname"><a href="group___n___s_t_r.html#ga2386f438e79df60930987a6102e87934">str_sanitize_ex</a></div><div class="ttdeci">int str_sanitize_ex(char *string, const NSTRBYTE string_len, const char *mask, const NSTRBYTE masklen, const char replacement)</div><div class="ttdoc">clean a string by replacing evil characteres</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01556">n_str.c:1556</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga287229f34095426806d36c86be764d12"><div class="ttname"><a href="group___n___s_t_r.html#ga287229f34095426806d36c86be764d12">nstr_to_file</a></div><div class="ttdeci">int nstr_to_file(N_STR *n_str, char *filename)</div><div class="ttdoc">Write a N_STR content into a file.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00410">n_str.c:410</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga3257ab0fdf5a36d0dfca480a161d9fbf"><div class="ttname"><a href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf">scan_dir_ex</a></div><div class="ttdeci">int scan_dir_ex(const char *dir, const char *pattern, LIST *result, const int recurse, const int mode)</div><div class="ttdoc">Scan a list of directory and return a list of char *file.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01295">n_str.c:1295</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga342bfee6550085fdf64e3db3cdd3ecb3"><div class="ttname"><a href="group___n___s_t_r.html#ga342bfee6550085fdf64e3db3cdd3ecb3">str_to_long_long_ex</a></div><div class="ttdeci">int str_to_long_long_ex(const char *s, NSTRBYTE start, NSTRBYTE end, long long int *i, const int base)</div><div class="ttdoc">Helper for string[start to end] to long long integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00639">n_str.c:639</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga3e30a18ec42d0f4cd8651c442bf62651"><div class="ttname"><a href="group___n___s_t_r.html#ga3e30a18ec42d0f4cd8651c442bf62651">nstrdup</a></div><div class="ttdeci">N_STR * nstrdup(N_STR *msg)</div><div class="ttdoc">Duplicate a N_STR.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00746">n_str.c:746</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga4e862f3b3b1b0f04d0cc455a3f260e15"><div class="ttname"><a href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15">nstrcat_bytes_ex</a></div><div class="ttdeci">int nstrcat_bytes_ex(N_STR *dest, void *src, NSTRBYTE size)</div><div class="ttdoc">Append data into N_STR using internal N_STR size and cursor position.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01177">n_str.c:1177</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga50dd2820bb9517359112b24abb187801"><div class="ttname"><a href="group___n___s_t_r.html#ga50dd2820bb9517359112b24abb187801">nstrcat_bytes</a></div><div class="ttdeci">int nstrcat_bytes(N_STR *dest, void *src)</div><div class="ttdoc">Append data into N_STR using internal N_STR size and cursor position.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01198">n_str.c:1198</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga55fdc7d1a7bd05f3e3925486e7fc9b9d"><div class="ttname"><a href="group___n___s_t_r.html#ga55fdc7d1a7bd05f3e3925486e7fc9b9d">str_to_int_ex</a></div><div class="ttdeci">int str_to_int_ex(const char *s, NSTRBYTE start, NSTRBYTE end, int *i, const int base)</div><div class="ttdoc">Helper for string[start to end] to integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00441">n_str.c:441</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga62422c326112e425298de6fb92584067"><div class="ttname"><a href="group___n___s_t_r.html#ga62422c326112e425298de6fb92584067">str_to_int_nolog</a></div><div class="ttdeci">int str_to_int_nolog(const char *s, NSTRBYTE start, NSTRBYTE end, int *i, const int base, N_STR **infos)</div><div class="ttdoc">Helper for string[start to end] to integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00494">n_str.c:494</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga69e5f2dbf75571a73e5a3332929642a4"><div class="ttname"><a href="group___n___s_t_r.html#ga69e5f2dbf75571a73e5a3332929642a4">char_to_nstr</a></div><div class="ttdeci">N_STR * char_to_nstr(const char *src)</div><div class="ttdoc">Convert a char into a N_STR, short version.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00268">n_str.c:268</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga6aafe2498e23778dc91c8ad08167ff24"><div class="ttname"><a href="group___n___s_t_r.html#ga6aafe2498e23778dc91c8ad08167ff24">nfgets</a></div><div class="ttdeci">char * nfgets(char *buffer, NSTRBYTE size, FILE *stream)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00166">n_str.c:166</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga6ed24cee257fc28cf2febc8f607cbfb0"><div class="ttname"><a href="group___n___s_t_r.html#ga6ed24cee257fc28cf2febc8f607cbfb0">write_and_fit_ex</a></div><div class="ttdeci">int write_and_fit_ex(char **dest, NSTRBYTE *size, NSTRBYTE *written, char *src, NSTRBYTE src_size, NSTRBYTE additional_padding)</div><div class="ttdoc">concatenate a copy of src of size src_size to dest, starting at dest[ written ], updating written and...</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01226">n_str.c:1226</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga783070a793146a860c3651c8434f32e1"><div class="ttname"><a href="group___n___s_t_r.html#ga783070a793146a860c3651c8434f32e1">skipw</a></div><div class="ttdeci">int skipw(char *string, char toskip, NSTRBYTE *iterator, int inc)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00786">n_str.c:786</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga79fa44855e34ba816359656e8bfd841f"><div class="ttname"><a href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">WILDMAT_ABORT</a></div><div class="ttdeci">#define WILDMAT_ABORT</div><div class="ttdoc">Abort code to sped up pattern matching.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00058">n_str.h:58</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga7b1c84d10757d1886ed29938f1f65973"><div class="ttname"><a href="group___n___s_t_r.html#ga7b1c84d10757d1886ed29938f1f65973">empty_nstr</a></div><div class="ttdeci">int empty_nstr(N_STR *nstr)</div><div class="ttdoc">empty a N_STR string</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00193">n_str.c:193</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga83b7c5c99476048f972ead97468ab7c2"><div class="ttname"><a href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2">wildmatcase</a></div><div class="ttdeci">int wildmatcase(register const char *text, register const char *p)</div><div class="ttdoc">Written by Rich Salz rsalz at osf.org, refurbished by me.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01443">n_str.c:1443</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga868c667912754efcf68370278b0aaee1"><div class="ttname"><a href="group___n___s_t_r.html#ga868c667912754efcf68370278b0aaee1">WILDMAT_NEGATE_CLASS</a></div><div class="ttdeci">#define WILDMAT_NEGATE_CLASS</div><div class="ttdoc">What character marks an inverted character class?</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00060">n_str.h:60</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga873edbb1f8787d0a78a13ccbbed9b9f9"><div class="ttname"><a href="group___n___s_t_r.html#ga873edbb1f8787d0a78a13ccbbed9b9f9">new_nstr</a></div><div class="ttdeci">N_STR * new_nstr(NSTRBYTE size)</div><div class="ttdoc">create a new N_STR string</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00209">n_str.c:209</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga88e865dd8e64f3f3504a99d4d0961c37"><div class="ttname"><a href="group___n___s_t_r.html#ga88e865dd8e64f3f3504a99d4d0961c37">str_replace</a></div><div class="ttdeci">char * str_replace(const char *string, const char *substr, const char *replacement)</div><div class="ttdoc">Replace &quot;substr&quot; by &quot;replacement&quot; inside string taken from http://coding.debuntu.org/c-implementing-s...</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01514">n_str.c:1514</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaa3becc1e523b47d5d53bbbf6b1603520"><div class="ttname"><a href="group___n___s_t_r.html#gaa3becc1e523b47d5d53bbbf6b1603520">scan_dir</a></div><div class="ttdeci">int scan_dir(const char *dir, LIST *result, const int recurse)</div><div class="ttdoc">Scan a list of directory and return a list of char *file.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01279">n_str.c:1279</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaaf432cb6330353e306e51ed3d6e9f417"><div class="ttname"><a href="group___n___s_t_r.html#gaaf432cb6330353e306e51ed3d6e9f417">str_sanitize</a></div><div class="ttdeci">int str_sanitize(char *string, const char *mask, const char replacement)</div><div class="ttdoc">clean a string by replacing evil characteres</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01583">n_str.c:1583</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gab731024d29b0937615c1cdddeb8d4875"><div class="ttname"><a href="group___n___s_t_r.html#gab731024d29b0937615c1cdddeb8d4875">split</a></div><div class="ttdeci">char ** split(const char *str, const char *delim, int empty)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00983">n_str.c:983</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gabb57d0188e78f2520d4ae7cc805579f5"><div class="ttname"><a href="group___n___s_t_r.html#gabb57d0188e78f2520d4ae7cc805579f5">strup</a></div><div class="ttdeci">int strup(char *string, char *dest)</div><div class="ttdoc">Upper case a string.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00893">n_str.c:893</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gabcfef0711183d5a9eb5ccb9c72ccaf85"><div class="ttname"><a href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85">wildmat</a></div><div class="ttdeci">int wildmat(register const char *text, register const char *p)</div><div class="ttdoc">Written by Rich Salz rsalz at osf.org, refurbished by me.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01375">n_str.c:1375</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gabd313699b10bb56e50c45670e479faa7"><div class="ttname"><a href="group___n___s_t_r.html#gabd313699b10bb56e50c45670e479faa7">free_nstr_nolog</a></div><div class="ttdeci">int free_nstr_nolog(N_STR **ptr)</div><div class="ttdoc">Free a N_STR structure and set the pointer to NULL.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00083">n_str.c:83</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gabe0231d30f0adca6678adba9ffca328a"><div class="ttname"><a href="group___n___s_t_r.html#gabe0231d30f0adca6678adba9ffca328a">str_to_long</a></div><div class="ttdeci">int str_to_long(const char *s, long int *i, const int base)</div><div class="ttdoc">Helper for string to integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00710">n_str.c:710</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gac4314e9f0ada88300a09d66405d541a8"><div class="ttname"><a href="group___n___s_t_r.html#gac4314e9f0ada88300a09d66405d541a8">char_to_nstr_ex</a></div><div class="ttdeci">int char_to_nstr_ex(const char *from, NSTRBYTE nboct, N_STR **to)</div><div class="ttdoc">Convert a char into a N_STR, extended version.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00241">n_str.c:241</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaca4a7a2dfa962f043cb8f3762ce28761"><div class="ttname"><a href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761">_free_nstr</a></div><div class="ttdeci">int _free_nstr(N_STR **ptr)</div><div class="ttdoc">Free a N_STR structure and set the pointer to NULL.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00066">n_str.c:66</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gad2c9b27509a55615e57ef8efd2ca3a02"><div class="ttname"><a href="group___n___s_t_r.html#gad2c9b27509a55615e57ef8efd2ca3a02">file_to_nstr</a></div><div class="ttdeci">N_STR * file_to_nstr(char *filename)</div><div class="ttdoc">Load a whole file into a N_STR.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00283">n_str.c:283</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gad53cff99261e509872a2a4128b1265cf"><div class="ttname"><a href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf">free_split_result</a></div><div class="ttdeci">int free_split_result(char ***tab)</div><div class="ttdoc">Free a split result allocated array.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01082">n_str.c:1082</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gae1af929354e55057c4f134bce8f5b4d6"><div class="ttname"><a href="group___n___s_t_r.html#gae1af929354e55057c4f134bce8f5b4d6">free_nstr_ptr_nolog</a></div><div class="ttdeci">void free_nstr_ptr_nolog(void *ptr)</div><div class="ttdoc">Free a N_STR pointer structure.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00101">n_str.c:101</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gae2c2238ae654a58f23570ce58e4d0eb8"><div class="ttname"><a href="group___n___s_t_r.html#gae2c2238ae654a58f23570ce58e4d0eb8">str_to_int</a></div><div class="ttdeci">int str_to_int(const char *s, int *i, const int base)</div><div class="ttdoc">Helper for string to integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00541">n_str.c:541</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gae4317ddc09606fcca46265a53bfbfb8b"><div class="ttname"><a href="group___n___s_t_r.html#gae4317ddc09606fcca46265a53bfbfb8b">skipu</a></div><div class="ttdeci">int skipu(char *string, char toskip, NSTRBYTE *iterator, int inc)</div><div class="ttdoc">skip until 'toskip' occurence is found from 'iterator' to the next 'toskip' value.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00840">n_str.c:840</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gae5bb0c43f76b886197ee48679f0e8dbc"><div class="ttname"><a href="group___n___s_t_r.html#gae5bb0c43f76b886197ee48679f0e8dbc">trim</a></div><div class="ttdeci">char * trim(char *s)</div><div class="ttdoc">trim and put a \0 at the end, return new char *</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00150">n_str.c:150</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gae7327b1afe9e61cff503e8eecc2e9fe7"><div class="ttname"><a href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7">nstrcat_ex</a></div><div class="ttdeci">int nstrcat_ex(N_STR *dest, void *src, NSTRBYTE size, NSTRBYTE blk_size, int resize_flag)</div><div class="ttdoc">Append data into N_STR using internal N_STR size and cursor position.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01109">n_str.c:1109</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaeaf9add3ea7a87eeea6e0cc4a81b47e6"><div class="ttname"><a href="group___n___s_t_r.html#gaeaf9add3ea7a87eeea6e0cc4a81b47e6">strlo</a></div><div class="ttdeci">int strlo(char *string, char *dest)</div><div class="ttdoc">Upper case a string.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00916">n_str.c:916</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaf1ad6fe037290fd52fb91b89dd978b1f"><div class="ttname"><a href="group___n___s_t_r.html#gaf1ad6fe037290fd52fb91b89dd978b1f">nstr_to_fd</a></div><div class="ttdeci">int nstr_to_fd(N_STR *str, FILE *out, int lock)</div><div class="ttdoc">Write a N_STR content into a file.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00353">n_str.c:353</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaf2fb09488bdaa0e8662f639ea899627e"><div class="ttname"><a href="group___n___s_t_r.html#gaf2fb09488bdaa0e8662f639ea899627e">str_to_long_ex</a></div><div class="ttdeci">int str_to_long_ex(const char *s, NSTRBYTE start, NSTRBYTE end, long int *i, const int base)</div><div class="ttdoc">Helper for string[start to end] to long integer.</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l00564">n_str.c:564</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_gaf871f697487843d865b54ecd8cfd44a3"><div class="ttname"><a href="group___n___s_t_r.html#gaf871f697487843d865b54ecd8cfd44a3">write_and_fit</a></div><div class="ttdeci">int write_and_fit(char **dest, NSTRBYTE *size, NSTRBYTE *written, char *src)</div><div class="ttdoc">concatenate a copy of src of size strlen( src ) to dest, starting at dest[ written ],...</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8c_source.html#l01265">n_str.c:1265</a></div></div>
<div class="ttc" id="astruct_n___s_t_r_html_a576fb0ebcd98c7bad5aa25250d830092"><div class="ttname"><a href="struct_n___s_t_r.html#a576fb0ebcd98c7bad5aa25250d830092">N_STR::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">the string</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00153">n_str.h:153</a></div></div>
<div class="ttc" id="astruct_n___s_t_r_html_a92e6a58234cf975e9d1419e9429cb663"><div class="ttname"><a href="struct_n___s_t_r.html#a92e6a58234cf975e9d1419e9429cb663">N_STR::length</a></div><div class="ttdeci">NSTRBYTE length</div><div class="ttdoc">length of string (in case we wanna keep information after the 0 end of string value)</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00155">n_str.h:155</a></div></div>
<div class="ttc" id="astruct_n___s_t_r_html_aacd53350ba5ffcb9284e23069f74da3d"><div class="ttname"><a href="struct_n___s_t_r.html#aacd53350ba5ffcb9284e23069f74da3d">N_STR::written</a></div><div class="ttdeci">NSTRBYTE written</div><div class="ttdoc">size of the written data inside the string</div><div class="ttdef"><b>Definition:</b> <a href="n__str_8h_source.html#l00157">n_str.h:157</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="n__str_8c.html">n_str.c</a></li>
    <li class="footer">Generated on Wed Feb 2 2022 14:24:10 for Nilorea Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
