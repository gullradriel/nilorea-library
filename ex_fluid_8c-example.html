<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nilorea Library: ex_fluid.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="NiloreaStudio.png"/></td>
  <td id="projectalign">
   <div id="projectname">Nilorea Library
   </div>
   <div id="projectbrief">C utilities for networking, threading, graphics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ex_fluid_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ex_fluid.c</div></div>
</div><!--header-->
<div class="contents">
<p>ex_fluids Main File</p>
<p>ex_fluids Main File </p><dl class="section author"><dt>Author</dt><dd>Castagnier Mickael </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>30/12/2021</dd></dl>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#define ALLEGRO_UNSTABLE 1</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;locale.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__common_8h.html">nilorea/n_common.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__log_8h.html">nilorea/n_log.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__list_8h.html">nilorea/n_list.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__str_8h.html">nilorea/n_str.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__time_8h.html">nilorea/n_time.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="n__fluids_8h.html">nilorea/n_fluids.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;allegro5/allegro.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;allegro5/allegro_ttf.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;allegro5/allegro_audio.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;allegro5/allegro_acodec.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;allegro5/allegro_font.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;allegro5/allegro_image.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;allegro5/allegro_primitives.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;ex_fluid_config.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define RESERVED_SAMPLES 16</span></div>
<div class="line"><span class="preprocessor">#define MAX_SAMPLE_DATA 10</span></div>
<div class="line"> </div>
<div class="line">ALLEGRO_DISPLAY* display = NULL;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> *                           VARIOUS DECLARATIONS                             *</span></div>
<div class="line"><span class="comment"> ******************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> DONE = 0,            <span class="comment">/* Flag to check if we are always running */</span></div>
<div class="line">    getoptret = 0,       <span class="comment">/* launch parameter check */</span></div>
<div class="line">    log_level = <a id="a0" name="a0"></a><a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>; <span class="comment">/* default LOG_LEVEL */</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span> drawFPS = 60.0;</div>
<div class="line"><span class="keywordtype">double</span> logicFPS = 120.0;</div>
<div class="line"> </div>
<div class="line">ALLEGRO_TIMER* fps_timer = NULL;</div>
<div class="line">ALLEGRO_TIMER* logic_timer = NULL;</div>
<div class="line"><a id="_a1" name="_a1"></a><a class="code hl_struct" href="group___n___t_i_m_e.html#struct_n___t_i_m_e">N_TIME</a> logic_chrono;</div>
<div class="line"><a class="code hl_struct" href="group___n___t_i_m_e.html#struct_n___t_i_m_e">N_TIME</a> drawing_chrono;</div>
<div class="line"> </div>
<div class="line"><a id="_a2" name="_a2"></a><a class="code hl_struct" href="group___n___f_l_u_i_d_s.html#struct_n___f_l_u_i_d">N_FLUID</a>* fluid_sim = NULL;</div>
<div class="line"><span class="keywordtype">size_t</span> WIDTH = 800,</div>
<div class="line">       HEIGHT = 600;</div>
<div class="line"><span class="keywordtype">bool</span> fullscreen = 0;</div>
<div class="line"><span class="keywordtype">char</span>* bgmusic = NULL;</div>
<div class="line"> </div>
<div class="line"><a id="_a3" name="_a3"></a><a class="code hl_struct" href="group___t_h_r_e_a_d_s.html#struct_t_h_r_e_a_d___p_o_o_l">THREAD_POOL</a>* thread_pool = NULL;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <span class="comment">/* Set the locale to the POSIX C environment */</span></div>
<div class="line">    setlocale(LC_ALL, <span class="stringliteral">&quot;POSIX&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a id="a4" name="a4"></a><a class="code hl_function" href="group___l_o_g.html#gacad9b2d55788f46ddde811c986ead9ae">set_log_level</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>);</div>
<div class="line"> </div>
<div class="line">    <a id="_a5" name="_a5"></a><a class="code hl_struct" href="group___n___s_t_r.html#struct_n___s_t_r">N_STR</a>* <a id="a6" name="a6"></a><a class="code hl_variable" href="n__log_8c.html#ab936051f5aaca44c6c3c41dee0d19c36">log_file</a> = NULL;</div>
<div class="line">    <a id="a7" name="a7"></a><a class="code hl_define" href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a>(<a class="code hl_variable" href="n__log_8c.html#ab936051f5aaca44c6c3c41dee0d19c36">log_file</a>, <span class="stringliteral">&quot;%s.log&quot;</span>, argv[0]);</div>
<div class="line">    <span class="comment">/*set_log_file( _nstr( log_file ) );*/</span></div>
<div class="line">    <a id="a8" name="a8"></a><a class="code hl_define" href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a>(&amp;<a class="code hl_variable" href="n__log_8c.html#ab936051f5aaca44c6c3c41dee0d19c36">log_file</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> ver_str[128] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((getoptret = getopt(argc, argv, <span class="stringliteral">&quot;hvV:L:&quot;</span>)) != EOF) {</div>
<div class="line">        <span class="keywordflow">switch</span> (getoptret) {</div>
<div class="line">            <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">                <a id="a9" name="a9"></a><a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a id="a10" name="a10"></a><a class="code hl_define" href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;\n    %s -h help -v version -V DEBUGLEVEL (NOLOG,VERBOSE,NOTICE,ERROR,DEBUG)\n&quot;</span>, argv[0]);</div>
<div class="line">                exit(TRUE);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div>
<div class="line">                sprintf(ver_str, <span class="stringliteral">&quot;%s %s&quot;</span>, __DATE__, __TIME__);</div>
<div class="line">                exit(TRUE);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>:</div>
<div class="line">                <span class="keywordflow">if</span> (!strncmp(<span class="stringliteral">&quot;INFO&quot;</span>, optarg, 6)) {</div>
<div class="line">                    log_level = <a id="a11" name="a11"></a><a class="code hl_define" href="group___l_o_g.html#gaeb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keywordflow">if</span> (!strncmp(<span class="stringliteral">&quot;NOTICE&quot;</span>, optarg, 6)) {</div>
<div class="line">                        log_level = <a class="code hl_define" href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        <span class="keywordflow">if</span> (!strncmp(<span class="stringliteral">&quot;VERBOSE&quot;</span>, optarg, 7)) {</div>
<div class="line">                            log_level = <a class="code hl_define" href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            <span class="keywordflow">if</span> (!strncmp(<span class="stringliteral">&quot;ERROR&quot;</span>, optarg, 5)) {</div>
<div class="line">                                log_level = <a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>;</div>
<div class="line">                            } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">if</span> (!strncmp(<span class="stringliteral">&quot;DEBUG&quot;</span>, optarg, 5)) {</div>
<div class="line">                                    log_level = <a id="a12" name="a12"></a><a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                    <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;%s is not a valid log level&quot;</span>, optarg);</div>
<div class="line">                                    exit(FALSE);</div>
<div class="line">                                }</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;LOG LEVEL UP TO: %d&quot;</span>, log_level);</div>
<div class="line">                <a class="code hl_function" href="group___l_o_g.html#gacad9b2d55788f46ddde811c986ead9ae">set_log_level</a>(log_level);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:</div>
<div class="line">                <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;LOG FILE: %s&quot;</span>, optarg);</div>
<div class="line">                <a id="a13" name="a13"></a><a class="code hl_function" href="group___l_o_g.html#gac83aa9829ddf0d169e2890ef63052b52">set_log_file</a>(optarg);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>: {</div>
<div class="line">                <span class="keywordflow">switch</span> (optopt) {</div>
<div class="line">                    <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>:</div>
<div class="line">                        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;\nPlease specify a log level after -V. \nAvailable values: NOLOG,VERBOSE,NOTICE,ERROR,DEBUG&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:</div>
<div class="line">                        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;\nPlease specify a log file after -L&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">default</span>:</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">                __attribute__((fallthrough));</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;\n    %s -h help -v version -V DEBUGLEVEL (NOLOG,VERBOSE,NOTICE,ERROR,DEBUG) -L logfile&quot;</span>, argv[0]);</div>
<div class="line">                exit(FALSE);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * INITIALISATION</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">int</span> threadedProcessing = 0;</div>
<div class="line">    <a class="code hl_struct" href="group___n___f_l_u_i_d_s.html#struct_n___f_l_u_i_d">N_FLUID</a>* fluid_data = NULL;</div>
<div class="line">    <a id="a14" name="a14"></a><a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a>(fluid_data, <a class="code hl_struct" href="group___n___f_l_u_i_d_s.html#struct_n___f_l_u_i_d">N_FLUID</a>, 1);</div>
<div class="line">    <span class="keywordflow">if</span> (load_app_state(<span class="stringliteral">&quot;CONFIGS/ex_fluid.cfg&quot;</span>, &amp;WIDTH, &amp;HEIGHT, &amp;fullscreen, &amp;bgmusic, &amp;drawFPS, &amp;logicFPS, fluid_data, &amp;threadedProcessing) != TRUE) {</div>
<div class="line">        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;couldn&#39;t load CONFIGS/ex_fluid.cfg !&quot;</span>);</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">double</span> fluid_factor = fluid_data-&gt;<a id="a15" name="a15"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad768cf56896d859a3be3e046d559df9b">cScale</a>;</div>
<div class="line">    <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;%s starting with params: %dx%d fullscreen(%d), music: %s&quot;</span>, argv[0], WIDTH, HEIGHT, fullscreen, <a id="a16" name="a16"></a><a class="code hl_define" href="group___c_o_m_m_o_n_s.html#ga55b9404f7bc9d3a3ead2f0103331a87e">_str</a>(bgmusic));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* allegro 5 + addons loading */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!al_init()) {</div>
<div class="line">        <a id="a17" name="a17"></a><a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Could not init Allegro.\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_acodec_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Could not register addons.\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_install_audio()) {</div>
<div class="line">        <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Unable to initialize audio addon, disabling bgmusic\n&quot;</span>);</div>
<div class="line">        <a id="a18" name="a18"></a><a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>(bgmusic);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_acodec_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize acoded addon\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_image_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize image addon\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_primitives_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize primitives addon\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_font_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize font addon\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_init_ttf_addon()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize ttf_font addon\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_install_keyboard()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize keyboard handler\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!al_install_mouse()) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to initialize mouse handler\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (bgmusic &amp;&amp; !al_reserve_samples(RESERVED_SAMPLES)) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Could not set up voice and mixer.\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ALLEGRO_SAMPLE* sample_data[MAX_SAMPLE_DATA] = {NULL};</div>
<div class="line">    memset(sample_data, 0, <span class="keyword">sizeof</span>(sample_data));</div>
<div class="line"> </div>
<div class="line">    ALLEGRO_EVENT_QUEUE* event_queue = NULL;</div>
<div class="line"> </div>
<div class="line">    event_queue = al_create_event_queue();</div>
<div class="line">    <span class="keywordflow">if</span> (!event_queue) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;failed to create event_queue!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (fullscreen) {</div>
<div class="line">        al_set_new_display_flags(ALLEGRO_OPENGL | ALLEGRO_FULLSCREEN_WINDOW);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        al_set_new_display_flags(ALLEGRO_OPENGL | ALLEGRO_WINDOWED);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __windows__</span></div>
<div class="line">    al_set_new_bitmap_flags(ALLEGRO_VIDEO_BITMAP | ALLEGRO_NO_PRESERVE_TEXTURE);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    display = al_create_display(WIDTH, HEIGHT);</div>
<div class="line">    <span class="keywordflow">if</span> (!display) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to create display\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    al_set_window_title(display, argv[0]);</div>
<div class="line"> </div>
<div class="line">    ALLEGRO_FONT* font = al_load_font(<span class="stringliteral">&quot;DATAS/2Dumb.ttf&quot;</span>, 18, 0);</div>
<div class="line">    <span class="keywordflow">if</span> (!font) {</div>
<div class="line">        <a class="code hl_function" href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a>(<span class="stringliteral">&quot;Unable to load font DATAS/2Dumb.ttf\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    DONE = 0;</div>
<div class="line">    fps_timer = al_create_timer(1.0 / drawFPS);</div>
<div class="line">    logic_timer = al_create_timer(1.0 / logicFPS);</div>
<div class="line"> </div>
<div class="line">    al_register_event_source(event_queue, al_get_display_event_source(display));</div>
<div class="line">    al_start_timer(fps_timer);</div>
<div class="line">    al_start_timer(logic_timer);</div>
<div class="line">    al_register_event_source(event_queue, al_get_timer_event_source(fps_timer));</div>
<div class="line">    al_register_event_source(event_queue, al_get_timer_event_source(logic_timer));</div>
<div class="line"> </div>
<div class="line">    al_register_event_source(event_queue, al_get_keyboard_event_source());</div>
<div class="line">    al_register_event_source(event_queue, al_get_mouse_event_source());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> backbuffer = 1;</div>
<div class="line">    ALLEGRO_BITMAP* scrbuf = NULL;</div>
<div class="line">    ALLEGRO_BITMAP* bitmap = al_create_bitmap(WIDTH, HEIGHT);</div>
<div class="line"> </div>
<div class="line">    al_hide_mouse_cursor(display);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">enum</span> APP_KEYS {</div>
<div class="line">        KEY_UP,</div>
<div class="line">        KEY_DOWN,</div>
<div class="line">        KEY_LEFT,</div>
<div class="line">        KEY_RIGHT,</div>
<div class="line">        KEY_ESC,</div>
<div class="line">        KEY_SPACE,</div>
<div class="line">        KEY_CTRL,</div>
<div class="line">        KEY_SHIFT,</div>
<div class="line">        KEY_PAD_MINUS,</div>
<div class="line">        KEY_PAD_PLUS,</div>
<div class="line">        KEY_PAD_ENTER,</div>
<div class="line">        KEY_M,</div>
<div class="line">        KEY_W,</div>
<div class="line">        KEY_F1,</div>
<div class="line">        KEY_F2,</div>
<div class="line">        KEY_F3,</div>
<div class="line">        KEY_F4,</div>
<div class="line">        KEY_F5,</div>
<div class="line">        KEY_F6</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">int</span> key[19] = {<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (bgmusic) {</div>
<div class="line">        <span class="keywordflow">if</span> (!(sample_data[0] = al_load_sample(bgmusic))) {</div>
<div class="line">            <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">&quot;Could not load %s&quot;</span>, bgmusic);</div>
<div class="line">            exit(1);</div>
<div class="line">        }</div>
<div class="line">        al_play_sample(sample_data[0], 1, 0, 1, ALLEGRO_PLAYMODE_LOOP, NULL);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    thread_pool = <a id="a19" name="a19"></a><a class="code hl_function" href="group___t_h_r_e_a_d_s.html#ga06425285000fa305a3e9eb7d8affa32f">new_thread_pool</a>(<a id="a20" name="a20"></a><a class="code hl_function" href="group___t_h_r_e_a_d_s.html#ga8957711a73ec71ea58b28df71f4e1e0f">get_nb_cpu_cores</a>(), 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* set fluid */</span></div>
<div class="line">    fluid_sim = <a id="a21" name="a21"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gaff6f6732139e8c294f6affe1d594e8d2">new_n_fluid</a>(fluid_data-&gt;<a id="a22" name="a22"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a>, fluid_data-&gt;<a id="a23" name="a23"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#af3fe34183ccda4a0ab11b80923bfe232">gravity</a>, fluid_data-&gt;<a id="a24" name="a24"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a>, fluid_data-&gt;<a id="a25" name="a25"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a>, fluid_data-&gt;<a id="a26" name="a26"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a45c6f1e7ddc49b3603a6e28da1eb54c4">overRelaxation</a>, WIDTH / fluid_factor, HEIGHT / fluid_factor);</div>
<div class="line"> </div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a>;</div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#af3fe34183ccda4a0ab11b80923bfe232">gravity</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#af3fe34183ccda4a0ab11b80923bfe232">gravity</a>;</div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a>;</div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a>;</div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a45c6f1e7ddc49b3603a6e28da1eb54c4">overRelaxation</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a45c6f1e7ddc49b3603a6e28da1eb54c4">overRelaxation</a>;</div>
<div class="line">    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad768cf56896d859a3be3e046d559df9b">cScale</a> = fluid_data-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad768cf56896d859a3be3e046d559df9b">cScale</a>;</div>
<div class="line">    <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a>(fluid_data);</div>
<div class="line"> </div>
<div class="line">    fluid_sim-&gt;<a id="a27" name="a27"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#aae5a279139334f24ceac9039fc9f24ff">dt</a> = 1.0 / logicFPS;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> n = fluid_sim-&gt;<a id="a28" name="a28"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>;</div>
<div class="line">    <span class="keywordtype">double</span> inVel = 2.0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; fluid_sim-&gt;<a id="a29" name="a29"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a3e7dfd6baee8a431d97c4dcfb1f9fef3">numX</a>; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>; j++) {</div>
<div class="line">            <span class="keywordtype">double</span> s = 1.0;  <span class="comment">// fluid</span></div>
<div class="line">            <span class="keywordflow">if</span> (i == 0 || j == 0 || j == fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a> - 1)</div>
<div class="line">                s = 0.0;  <span class="comment">// solid</span></div>
<div class="line">                          <span class="comment">//</span></div>
<div class="line">            fluid_sim-&gt;<a id="a30" name="a30"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ab18c253babdb185b35846726c0c94a41">s</a>[i * n + j] = s;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (i == 1) {</div>
<div class="line">                fluid_sim-&gt;<a id="a31" name="a31"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a773de81eda63741c7ad6984921662a9e">u</a>[i * n + j] = inVel;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">double</span> pipeH = fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> minJ = floor(0.5 * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a> - 0.5 * pipeH);</div>
<div class="line">    <span class="keywordtype">size_t</span> maxJ = floor(0.5 * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a> + 0.5 * pipeH);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; minJ; j++)</div>
<div class="line">        fluid_sim-&gt;<a id="a32" name="a32"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 1.0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = minJ; j &lt; maxJ; j++)</div>
<div class="line">        fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 0.0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = maxJ; j &lt; fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>; j++)</div>
<div class="line">        fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 1.0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> do_draw = 1, do_logic = 1;</div>
<div class="line">    <span class="keywordtype">int</span> mx = WIDTH / 3, my = HEIGHT / 2, mouse_button = 0, mouse_b1 = 0, mouse_b2 = 0;</div>
<div class="line"> </div>
<div class="line">    <a id="a33" name="a33"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gacb82683a9afbf14c7b2b043451d4cffa">n_fluid_resetObstacles</a>(fluid_sim);</div>
<div class="line"> </div>
<div class="line">    al_flush_event_queue(event_queue);</div>
<div class="line">    al_set_mouse_xy(display, WIDTH / 3, HEIGHT / 2);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> w = al_get_display_width(display);</div>
<div class="line">    <span class="keywordtype">int</span> h = al_get_display_height(display);</div>
<div class="line"> </div>
<div class="line">    bitmap = al_create_bitmap(WIDTH, HEIGHT);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> logic_duration = 0;</div>
<div class="line">    <span class="keywordtype">size_t</span> drawing_duration = 0;</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="keywordflow">do</span> {</div>
<div class="line">            ALLEGRO_EVENT ev;</div>
<div class="line"> </div>
<div class="line">            al_wait_for_event(event_queue, &amp;ev);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_KEY_DOWN) {</div>
<div class="line">                <span class="keywordflow">switch</span> (ev.keyboard.keycode) {</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_UP:</div>
<div class="line">                        key[KEY_UP] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_DOWN:</div>
<div class="line">                        key[KEY_DOWN] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LEFT:</div>
<div class="line">                        key[KEY_LEFT] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RIGHT:</div>
<div class="line">                        key[KEY_RIGHT] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_ESCAPE:</div>
<div class="line">                        key[KEY_ESC] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_SPACE:</div>
<div class="line">                        key[KEY_SPACE] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LSHIFT:</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RSHIFT:</div>
<div class="line">                        key[KEY_SHIFT] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_MINUS:</div>
<div class="line">                        key[KEY_PAD_MINUS] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_PLUS:</div>
<div class="line">                        key[KEY_PAD_PLUS] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_ENTER:</div>
<div class="line">                        key[KEY_PAD_ENTER] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_M:</div>
<div class="line">                        key[KEY_M] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_W:</div>
<div class="line">                        key[KEY_W] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LCTRL:</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RCTRL:</div>
<div class="line">                        key[KEY_CTRL] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F1:</div>
<div class="line">                        key[KEY_F1] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F2:</div>
<div class="line">                        key[KEY_F2] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F3:</div>
<div class="line">                        key[KEY_F3] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F4:</div>
<div class="line">                        key[KEY_F4] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F5:</div>
<div class="line">                        key[KEY_F5] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F6:</div>
<div class="line">                        key[KEY_F6] = 1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">default</span>:</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_KEY_UP) {</div>
<div class="line">                <span class="keywordflow">switch</span> (ev.keyboard.keycode) {</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_UP:</div>
<div class="line">                        key[KEY_UP] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_DOWN:</div>
<div class="line">                        key[KEY_DOWN] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LEFT:</div>
<div class="line">                        key[KEY_LEFT] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RIGHT:</div>
<div class="line">                        key[KEY_RIGHT] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_ESCAPE:</div>
<div class="line">                        key[KEY_ESC] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_SPACE:</div>
<div class="line">                        key[KEY_SPACE] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LSHIFT:</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RSHIFT:</div>
<div class="line">                        key[KEY_SHIFT] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_MINUS:</div>
<div class="line">                        key[KEY_PAD_MINUS] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_PLUS:</div>
<div class="line">                        key[KEY_PAD_PLUS] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_PAD_ENTER:</div>
<div class="line">                        key[KEY_PAD_ENTER] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_M:</div>
<div class="line">                        key[KEY_M] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_W:</div>
<div class="line">                        key[KEY_W] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_LCTRL:</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_RCTRL:</div>
<div class="line">                        key[KEY_CTRL] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F1:</div>
<div class="line">                        key[KEY_F1] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F2:</div>
<div class="line">                        key[KEY_F2] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F3:</div>
<div class="line">                        key[KEY_F3] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F4:</div>
<div class="line">                        key[KEY_F4] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F5:</div>
<div class="line">                        key[KEY_F5] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ALLEGRO_KEY_F6:</div>
<div class="line">                        key[KEY_F6] = 0;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">default</span>:</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_TIMER) {</div>
<div class="line">                <span class="keywordflow">if</span> (al_get_timer_event_source(fps_timer) == ev.any.source) {</div>
<div class="line">                    do_draw = 1;</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (al_get_timer_event_source(logic_timer) == ev.any.source) {</div>
<div class="line">                    do_logic = 1;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_MOUSE_AXES) {</div>
<div class="line">                mx = ev.mouse.x;</div>
<div class="line">                my = ev.mouse.y;</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_MOUSE_BUTTON_DOWN) {</div>
<div class="line">                <span class="keywordflow">if</span> (ev.mouse.button == 1)</div>
<div class="line">                    mouse_b1 = 1;</div>
<div class="line">                <span class="keywordflow">if</span> (ev.mouse.button == 2)</div>
<div class="line">                    mouse_b2 = 1;</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_MOUSE_BUTTON_UP) {</div>
<div class="line">                <span class="keywordflow">if</span> (ev.mouse.button == 1)</div>
<div class="line">                    mouse_b1 = 0;</div>
<div class="line">                <span class="keywordflow">if</span> (ev.mouse.button == 2)</div>
<div class="line">                    mouse_b2 = 0;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Processing inputs */</span></div>
<div class="line">            mouse_button = -1;</div>
<div class="line">            <span class="keywordflow">if</span> (mouse_b1 == 1)</div>
<div class="line">                mouse_button = 1;</div>
<div class="line">            <span class="keywordflow">if</span> (mouse_b2 == 1)</div>
<div class="line">                mouse_button = 2;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.type == ALLEGRO_EVENT_DISPLAY_SWITCH_IN || ev.type == ALLEGRO_EVENT_DISPLAY_SWITCH_OUT) {</div>
<div class="line">                al_clear_keyboard_state(display);</div>
<div class="line">                al_flush_event_queue(event_queue);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// Processing inputs</span></div>
<div class="line">                <span class="comment">// get_keyboard( chat_line , ev );</span></div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F1]) {</div>
<div class="line">                    fluid_sim-&gt;<a id="a34" name="a34"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a35e46aff63e13c8e94482e9013f54da7">showSmoke</a> = 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F2]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a35e46aff63e13c8e94482e9013f54da7">showSmoke</a> = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F3]) {</div>
<div class="line">                    fluid_sim-&gt;<a id="a35" name="a35"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a476b3cbaafc45df3364b9981b44643a3">showPressure</a> = 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F4]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a476b3cbaafc45df3364b9981b44643a3">showPressure</a> = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F5]) {</div>
<div class="line">                    fluid_sim-&gt;<a id="a36" name="a36"></a><a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a661c7580004a2cd52d75a950df09b5c2">showPaint</a> = 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_F6]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a661c7580004a2cd52d75a950df09b5c2">showPaint</a> = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_UP]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a> += 100.0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_DOWN]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a> -= 100.0;</div>
<div class="line">                    <span class="keywordflow">if</span> (fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a> &lt; 1.0) fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a> = 1.0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_LEFT]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a>++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_RIGHT]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a>--;</div>
<div class="line">                    <span class="keywordflow">if</span> (fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a> &lt; 1.0) fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a> = 1.0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_PAD_PLUS]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> += 0.01;</div>
<div class="line">                    <span class="keywordflow">if</span> (fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> &gt; 1.0) fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> = 1.0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (key[KEY_PAD_MINUS]) {</div>
<div class="line">                    fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> -= 0.01;</div>
<div class="line">                    <span class="keywordflow">if</span> (fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> &lt; 0.1) fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> = 0.1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (mouse_button != -1) {</div>
<div class="line">                    <a class="code hl_define" href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a>(<a class="code hl_define" href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;mouse button: %d&quot;</span>, mouse_button);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">while</span> (!al_is_event_queue_empty(event_queue));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (do_logic == 1) {</div>
<div class="line">            <a id="a37" name="a37"></a><a class="code hl_function" href="group___n___t_i_m_e.html#ga83bf99faafa00b4a69f31a589ca712ff">start_HiTimer</a>(&amp;logic_chrono);</div>
<div class="line">            <span class="keyword">static</span> <span class="keywordtype">int</span> old_mx = -1, old_my = -1;</div>
<div class="line">            <span class="keywordtype">double</span> vx = 0.0, vy = 0.0;</div>
<div class="line">            <span class="keywordflow">if</span> (old_mx != mx || old_my != my) {</div>
<div class="line">                <span class="keywordflow">if</span> (old_mx != -1 &amp;&amp; old_my != -1) {</div>
<div class="line">                    vx = (old_mx - mx) / logicFPS;</div>
<div class="line">                    vy = (old_my - my) / logicFPS;</div>
<div class="line">                }</div>
<div class="line">                old_mx = mx;</div>
<div class="line">                old_my = my;</div>
<div class="line">                <a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gacb82683a9afbf14c7b2b043451d4cffa">n_fluid_resetObstacles</a>(fluid_sim);</div>
<div class="line">                <a id="a38" name="a38"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a>(fluid_sim, mx / fluid_factor, (my / fluid_factor) - 20.0, vx, vy, fluid_factor / 2);</div>
<div class="line">                <a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a>(fluid_sim, (mx / fluid_factor) - 15, my / fluid_factor, vx, vy, fluid_factor / 2 + fluid_factor / 3);</div>
<div class="line">                <a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a>(fluid_sim, (mx / fluid_factor) + 15, my / fluid_factor - 10.0, vx, vy, fluid_factor / 2 + fluid_factor / 2);</div>
<div class="line">                <a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a>(fluid_sim, (mx / fluid_factor) + 15, my / fluid_factor + 10.0, vx, vy, fluid_factor / 2 + fluid_factor / 2);</div>
<div class="line">                <a class="code hl_function" href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a>(fluid_sim, mx / fluid_factor, (my / fluid_factor) + 20.0, vx, vy, fluid_factor / 2);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            pipeH = fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a> * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>;</div>
<div class="line">            minJ = floor(0.5 * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a> - 0.5 * pipeH);</div>
<div class="line">            maxJ = floor(0.5 * fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a> + 0.5 * pipeH);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; minJ; j++)</div>
<div class="line">                fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 1.0;</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = minJ; j &lt; maxJ; j++)</div>
<div class="line">                fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 0.0;</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = maxJ; j &lt; fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">numY</a>; j++)</div>
<div class="line">                fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 1.0;</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = minJ; j &lt; maxJ; j++)</div>
<div class="line">                fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">m</a>[j] = 0.0;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (threadedProcessing == 1)</div>
<div class="line">                <a id="a39" name="a39"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#ga580ecc1e497035ce47b272309fcf22c8">n_fluid_simulate_threaded</a>(fluid_sim, thread_pool);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                <a id="a40" name="a40"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#ga690a4558c5b3d5eafdf1d7b64af5858f">n_fluid_simulate</a>(fluid_sim);</div>
<div class="line"> </div>
<div class="line">            logic_duration = (logic_duration + <a id="a41" name="a41"></a><a class="code hl_function" href="group___n___t_i_m_e.html#gaa26bb3d464f6def321b9919bf1e9d1f4">get_usec</a>(&amp;logic_chrono)) / 2;</div>
<div class="line">            do_logic = 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (do_draw == 1) {</div>
<div class="line">            <a class="code hl_function" href="group___n___t_i_m_e.html#ga83bf99faafa00b4a69f31a589ca712ff">start_HiTimer</a>(&amp;drawing_chrono);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (backbuffer)</div>
<div class="line">                scrbuf = al_get_backbuffer(display);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                scrbuf = bitmap;</div>
<div class="line"> </div>
<div class="line">            al_set_target_bitmap(scrbuf);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (!backbuffer)</div>
<div class="line">                al_lock_bitmap(scrbuf, al_get_bitmap_format(scrbuf), ALLEGRO_LOCK_READWRITE);</div>
<div class="line"> </div>
<div class="line">            <a id="a42" name="a42"></a><a class="code hl_function" href="group___n___f_l_u_i_d_s.html#ga386df773d1b7d98ffd6c1d2f98cf5091">n_fluid_draw</a>(fluid_sim);</div>
<div class="line"> </div>
<div class="line">            al_draw_circle(mx, my - 20 * fluid_factor, fluid_factor * fluid_factor / 2, al_map_rgb(255, 0, 0), 2.0);</div>
<div class="line">            al_draw_circle(mx - 15 * fluid_factor, my, fluid_factor * fluid_factor / 2 + (fluid_factor * fluid_factor) / 3, al_map_rgb(255, 0, 0), 2.0);</div>
<div class="line">            al_draw_circle(mx + 15 * fluid_factor, my + 10.0 * fluid_factor, fluid_factor * fluid_factor / 2 + (fluid_factor * fluid_factor) / 2, al_map_rgb(255, 0, 0), 2.0);</div>
<div class="line">            al_draw_circle(mx + 15 * fluid_factor, my - 10.0 * fluid_factor, fluid_factor * fluid_factor / 2 + (fluid_factor * fluid_factor) / 2, al_map_rgb(255, 0, 0), 2.0);</div>
<div class="line">            al_draw_circle(mx, my + 20 * fluid_factor, fluid_factor * fluid_factor / 2, al_map_rgb(255, 0, 0), 2.0);</div>
<div class="line"> </div>
<div class="line">            <span class="keyword">static</span> <a class="code hl_struct" href="group___n___s_t_r.html#struct_n___s_t_r">N_STR</a>* textout = NULL;</div>
<div class="line">            <a class="code hl_define" href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a>(textout, <span class="stringliteral">&quot;[F1/F2]:showSmoke:%d [F3/F4]:showPressure:%d [F5/F6]:showPaint:%d&quot;</span>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a35e46aff63e13c8e94482e9013f54da7">showSmoke</a>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a476b3cbaafc45df3364b9981b44643a3">showPressure</a>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a661c7580004a2cd52d75a950df09b5c2">showPaint</a>);</div>
<div class="line">            al_draw_text(font, al_map_rgb(0, 0, 255), WIDTH, 10, ALLEGRO_ALIGN_RIGHT, <a id="a43" name="a43"></a><a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gaf0e29edead3f943a4ac241c5724e1384">_nstr</a>(textout));</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_define" href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a>(textout, <span class="stringliteral">&quot;numIters: %zd production: %3.3g density: %3.3g&quot;</span>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">numIters</a>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">fluid_production_percentage</a>, fluid_sim-&gt;<a class="code hl_variable" href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">density</a>);</div>
<div class="line">            al_draw_text(font, al_map_rgb(0, 0, 255), WIDTH, 25, ALLEGRO_ALIGN_RIGHT, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gaf0e29edead3f943a4ac241c5724e1384">_nstr</a>(textout));</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_define" href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a>(textout, <span class="stringliteral">&quot;logic(max %zd): %zd usecs&quot;</span>, (<span class="keywordtype">size_t</span>)(1000000.0 / logicFPS), logic_duration);</div>
<div class="line">            al_draw_text(font, al_map_rgb(0, 0, 255), 5, 10, ALLEGRO_ALIGN_LEFT, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gaf0e29edead3f943a4ac241c5724e1384">_nstr</a>(textout));</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_define" href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a>(textout, <span class="stringliteral">&quot;drawing(max %zd): %zd usecs&quot;</span>, (<span class="keywordtype">size_t</span>)(1000000.0 / drawFPS), drawing_duration);</div>
<div class="line">            al_draw_text(font, al_map_rgb(0, 0, 255), 5, 30, ALLEGRO_ALIGN_LEFT, <a class="code hl_define" href="group___c_o_m_m_o_n_s.html#gaf0e29edead3f943a4ac241c5724e1384">_nstr</a>(textout));</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (!backbuffer) {</div>
<div class="line">                al_unlock_bitmap(scrbuf);</div>
<div class="line">                al_set_target_bitmap(al_get_backbuffer(display));</div>
<div class="line">                al_draw_bitmap(scrbuf, w / 2 - al_get_bitmap_width(scrbuf) / 2, h / 2 - al_get_bitmap_height(scrbuf) / 2, 0);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            drawing_duration = (drawing_duration + <a class="code hl_function" href="group___n___t_i_m_e.html#gaa26bb3d464f6def321b9919bf1e9d1f4">get_usec</a>(&amp;drawing_chrono)) / 2;</div>
<div class="line"> </div>
<div class="line">            al_flip_display();</div>
<div class="line"> </div>
<div class="line">            do_draw = 0;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span> (!key[KEY_ESC] &amp;&amp; !DONE);</div>
<div class="line"> </div>
<div class="line">    al_uninstall_system();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga46bf052fc99248347a1dcf89bc0757c6"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga46bf052fc99248347a1dcf89bc0757c6">Malloc</a></div><div class="ttdeci">#define Malloc(__ptr, __struct, __size)</div><div class="ttdoc">Malloc Handler to get errors and set to 0.</div><div class="ttdef"><b>Definition</b> <a href="n__common_8h_source.html#l00187">n_common.h:187</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_ga55b9404f7bc9d3a3ead2f0103331a87e"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#ga55b9404f7bc9d3a3ead2f0103331a87e">_str</a></div><div class="ttdeci">#define _str(__PTR)</div><div class="ttdoc">define true</div><div class="ttdef"><b>Definition</b> <a href="n__common_8h_source.html#l00176">n_common.h:176</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_gacaf9e791d31308d5d43c0322b03ee322"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#gacaf9e791d31308d5d43c0322b03ee322">n_abort</a></div><div class="ttdeci">void n_abort(char const *format,...)</div><div class="ttdoc">abort program with a text</div><div class="ttdef"><b>Definition</b> <a href="n__common_8c_source.html#l00038">n_common.c:38</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_gae62e40d702e99a7760ba1de7451dff51"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#gae62e40d702e99a7760ba1de7451dff51">Free</a></div><div class="ttdeci">#define Free(__ptr)</div><div class="ttdoc">Free Handler to get errors.</div><div class="ttdef"><b>Definition</b> <a href="n__common_8h_source.html#l00242">n_common.h:242</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_s_html_gaf0e29edead3f943a4ac241c5724e1384"><div class="ttname"><a href="group___c_o_m_m_o_n_s.html#gaf0e29edead3f943a4ac241c5724e1384">_nstr</a></div><div class="ttdeci">#define _nstr(__PTR)</div><div class="ttdoc">N_STR or &quot;NULL&quot; string for logging purposes.</div><div class="ttdef"><b>Definition</b> <a href="n__common_8h_source.html#l00182">n_common.h:182</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga61355655c6d490cdf201afdfc340df4b"><div class="ttname"><a href="group___l_o_g.html#ga61355655c6d490cdf201afdfc340df4b">n_log</a></div><div class="ttdeci">#define n_log(__LEVEL__,...)</div><div class="ttdoc">Logging function wrapper to get line and func.</div><div class="ttdef"><b>Definition</b> <a href="n__log_8h_source.html#l00069">n_log.h:69</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="group___l_o_g.html#ga6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdoc">debug-level messages</div><div class="ttdef"><b>Definition</b> <a href="n__log_8h_source.html#l00064">n_log.h:64</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_ga96fad55b3f5adf08c39e4c877cf185e3"><div class="ttname"><a href="group___l_o_g.html#ga96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a></div><div class="ttdeci">#define LOG_ERR</div><div class="ttdoc">error conditions</div><div class="ttdef"><b>Definition</b> <a href="n__log_8h_source.html#l00056">n_log.h:56</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_gac83aa9829ddf0d169e2890ef63052b52"><div class="ttname"><a href="group___l_o_g.html#gac83aa9829ddf0d169e2890ef63052b52">set_log_file</a></div><div class="ttdeci">int set_log_file(char *file)</div><div class="ttdoc">Set the logging to a file instead of stderr.</div><div class="ttdef"><b>Definition</b> <a href="n__log_8c_source.html#l00117">n_log.c:117</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_gacad9b2d55788f46ddde811c986ead9ae"><div class="ttname"><a href="group___l_o_g.html#gacad9b2d55788f46ddde811c986ead9ae">set_log_level</a></div><div class="ttdeci">void set_log_level(const int log_level)</div><div class="ttdoc">Set the global log level value ( static int LOG_LEVEL )</div><div class="ttdef"><b>Definition</b> <a href="n__log_8c_source.html#l00088">n_log.c:88</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_gad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="group___l_o_g.html#gad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdoc">normal but significant condition</div><div class="ttdef"><b>Definition</b> <a href="n__log_8h_source.html#l00060">n_log.h:60</a></div></div>
<div class="ttc" id="agroup___l_o_g_html_gaeb4f36db01bd128c7afeac5889dac311"><div class="ttname"><a href="group___l_o_g.html#gaeb4f36db01bd128c7afeac5889dac311">LOG_INFO</a></div><div class="ttdeci">#define LOG_INFO</div><div class="ttdoc">informational</div><div class="ttdef"><b>Definition</b> <a href="n__log_8h_source.html#l00062">n_log.h:62</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a21d85ce6c45cf6bb04cffd8329d6943e"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a21d85ce6c45cf6bb04cffd8329d6943e">N_FLUID::numY</a></div><div class="ttdeci">size_t numY</div><div class="ttdoc">number of cells in Y</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00056">n_fluids.h:56</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a34912413ebaadf68bb12c7b4708d42cf"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a34912413ebaadf68bb12c7b4708d42cf">N_FLUID::fluid_production_percentage</a></div><div class="ttdeci">double fluid_production_percentage</div><div class="ttdoc">size of the produced fluid</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00086">n_fluids.h:86</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a35e46aff63e13c8e94482e9013f54da7"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a35e46aff63e13c8e94482e9013f54da7">N_FLUID::showSmoke</a></div><div class="ttdeci">bool showSmoke</div><div class="ttdoc">display fluid as a colored cloud instead of black and white, can be combined with showPressure</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00074">n_fluids.h:74</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a3e7dfd6baee8a431d97c4dcfb1f9fef3"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a3e7dfd6baee8a431d97c4dcfb1f9fef3">N_FLUID::numX</a></div><div class="ttdeci">size_t numX</div><div class="ttdoc">number of cells in X</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00054">n_fluids.h:54</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a45c6f1e7ddc49b3603a6e28da1eb54c4"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a45c6f1e7ddc49b3603a6e28da1eb54c4">N_FLUID::overRelaxation</a></div><div class="ttdeci">double overRelaxation</div><div class="ttdoc">over relaxation</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00072">n_fluids.h:72</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a476b3cbaafc45df3364b9981b44643a3"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a476b3cbaafc45df3364b9981b44643a3">N_FLUID::showPressure</a></div><div class="ttdeci">bool showPressure</div><div class="ttdoc">display fluids pressures as color variations, can be combined with showSmoke</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00078">n_fluids.h:78</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a661c7580004a2cd52d75a950df09b5c2"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a661c7580004a2cd52d75a950df09b5c2">N_FLUID::showPaint</a></div><div class="ttdeci">bool showPaint</div><div class="ttdoc">activate a fonky palette, override smoke and pressure display</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00076">n_fluids.h:76</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_a773de81eda63741c7ad6984921662a9e"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#a773de81eda63741c7ad6984921662a9e">N_FLUID::u</a></div><div class="ttdeci">double * u</div><div class="ttdoc">holder for u arrays</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00091">n_fluids.h:91</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_aae5a279139334f24ceac9039fc9f24ff"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#aae5a279139334f24ceac9039fc9f24ff">N_FLUID::dt</a></div><div class="ttdeci">double dt</div><div class="ttdoc">time between frames</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00066">n_fluids.h:66</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ab18c253babdb185b35846726c0c94a41"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ab18c253babdb185b35846726c0c94a41">N_FLUID::s</a></div><div class="ttdeci">double * s</div><div class="ttdoc">holder for s arrays</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00103">n_fluids.h:103</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_abe833e31116bd3c5fd0a60c4dfd0fec4"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#abe833e31116bd3c5fd0a60c4dfd0fec4">N_FLUID::numIters</a></div><div class="ttdeci">size_t numIters</div><div class="ttdoc">number of fluid processing iterations for each frame</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00062">n_fluids.h:62</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ac5994a433dd75980af320cdd50a352bc"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ac5994a433dd75980af320cdd50a352bc">N_FLUID::density</a></div><div class="ttdeci">double density</div><div class="ttdoc">density of the fluid (not working ?)</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00064">n_fluids.h:64</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ad4319096a109a32e0ceb30c570b68293"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ad4319096a109a32e0ceb30c570b68293">N_FLUID::m</a></div><div class="ttdeci">double * m</div><div class="ttdoc">holder for m arrays</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00106">n_fluids.h:106</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ad768cf56896d859a3be3e046d559df9b"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ad768cf56896d859a3be3e046d559df9b">N_FLUID::cScale</a></div><div class="ttdeci">double cScale</div><div class="ttdoc">scale used to deduce cellX and cellY from screen/window width and height</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00088">n_fluids.h:88</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_af3fe34183ccda4a0ab11b80923bfe232"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#af3fe34183ccda4a0ab11b80923bfe232">N_FLUID::gravity</a></div><div class="ttdeci">double gravity</div><div class="ttdoc">gravity on Y</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00070">n_fluids.h:70</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ga386df773d1b7d98ffd6c1d2f98cf5091"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ga386df773d1b7d98ffd6c1d2f98cf5091">n_fluid_draw</a></div><div class="ttdeci">int n_fluid_draw(N_FLUID *fluid)</div><div class="ttdoc">draw a N_FLUID on screen / targert bitmap</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00781">n_fluids.c:781</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ga580ecc1e497035ce47b272309fcf22c8"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ga580ecc1e497035ce47b272309fcf22c8">n_fluid_simulate_threaded</a></div><div class="ttdeci">int n_fluid_simulate_threaded(N_FLUID *fluid, THREAD_POOL *thread_pool)</div><div class="ttdoc">a threaded version of N_FLUID global processing function</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00579">n_fluids.c:579</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_ga690a4558c5b3d5eafdf1d7b64af5858f"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#ga690a4558c5b3d5eafdf1d7b64af5858f">n_fluid_simulate</a></div><div class="ttdeci">int n_fluid_simulate(N_FLUID *fluid)</div><div class="ttdoc">non threaded version of N_FLUID global processing function</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00562">n_fluids.c:562</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_gacb82683a9afbf14c7b2b043451d4cffa"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#gacb82683a9afbf14c7b2b043451d4cffa">n_fluid_resetObstacles</a></div><div class="ttdeci">int n_fluid_resetObstacles(N_FLUID *fluid)</div><div class="ttdoc">reset the obstacles set in a N_FLUID</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00678">n_fluids.c:678</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_gadfddee52df3d3270958f38d8127c6672"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#gadfddee52df3d3270958f38d8127c6672">n_fluid_setObstacle</a></div><div class="ttdeci">int n_fluid_setObstacle(N_FLUID *fluid, double x, double y, double vx, double vy, double r)</div><div class="ttdoc">set an obstacle in the fluid grid</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00651">n_fluids.c:651</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_gaff6f6732139e8c294f6affe1d594e8d2"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#gaff6f6732139e8c294f6affe1d594e8d2">new_n_fluid</a></div><div class="ttdeci">N_FLUID * new_n_fluid(double density, double gravity, size_t numIters, double dt, double overRelaxation, size_t sx, size_t sy)</div><div class="ttdoc">!</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8c_source.html#l00071">n_fluids.c:71</a></div></div>
<div class="ttc" id="agroup___n___f_l_u_i_d_s_html_struct_n___f_l_u_i_d"><div class="ttname"><a href="group___n___f_l_u_i_d_s.html#struct_n___f_l_u_i_d">N_FLUID</a></div><div class="ttdoc">structure of a fluid</div><div class="ttdef"><b>Definition</b> <a href="n__fluids_8h_source.html#l00052">n_fluids.h:52</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga113e906d03374ac38e441f1df44095fb"><div class="ttname"><a href="group___n___s_t_r.html#ga113e906d03374ac38e441f1df44095fb">free_nstr</a></div><div class="ttdeci">#define free_nstr(__ptr)</div><div class="ttdoc">free a N_STR structure and set the pointer to NULL</div><div class="ttdef"><b>Definition</b> <a href="n__str_8h_source.html#l00170">n_str.h:170</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_ga92cd2a8efba2cd901ec96dfce1601ca6"><div class="ttname"><a href="group___n___s_t_r.html#ga92cd2a8efba2cd901ec96dfce1601ca6">nstrprintf</a></div><div class="ttdeci">#define nstrprintf(__nstr_var, __format,...)</div><div class="ttdoc">Macro to quickly allocate and sprintf to N_STR.</div><div class="ttdef"><b>Definition</b> <a href="n__str_8h_source.html#l00088">n_str.h:88</a></div></div>
<div class="ttc" id="agroup___n___s_t_r_html_struct_n___s_t_r"><div class="ttname"><a href="group___n___s_t_r.html#struct_n___s_t_r">N_STR</a></div><div class="ttdoc">A box including a string and his lenght.</div><div class="ttdef"><b>Definition</b> <a href="n__str_8h_source.html#l00039">n_str.h:39</a></div></div>
<div class="ttc" id="agroup___n___t_i_m_e_html_ga83bf99faafa00b4a69f31a589ca712ff"><div class="ttname"><a href="group___n___t_i_m_e.html#ga83bf99faafa00b4a69f31a589ca712ff">start_HiTimer</a></div><div class="ttdeci">int start_HiTimer(N_TIME *timer)</div><div class="ttdoc">Initialize or restart from zero any N_TIME HiTimer.</div><div class="ttdef"><b>Definition</b> <a href="n__time_8c_source.html#l00067">n_time.c:67</a></div></div>
<div class="ttc" id="agroup___n___t_i_m_e_html_gaa26bb3d464f6def321b9919bf1e9d1f4"><div class="ttname"><a href="group___n___t_i_m_e.html#gaa26bb3d464f6def321b9919bf1e9d1f4">get_usec</a></div><div class="ttdeci">time_t get_usec(N_TIME *timer)</div><div class="ttdoc">Poll any N_TIME HiTimer, returning usec, and moving currentTime to startTime.</div><div class="ttdef"><b>Definition</b> <a href="n__time_8c_source.html#l00089">n_time.c:89</a></div></div>
<div class="ttc" id="agroup___n___t_i_m_e_html_struct_n___t_i_m_e"><div class="ttname"><a href="group___n___t_i_m_e.html#struct_n___t_i_m_e">N_TIME</a></div><div class="ttdoc">Timing Structure.</div><div class="ttdef"><b>Definition</b> <a href="n__time_8h_source.html#l00032">n_time.h:32</a></div></div>
<div class="ttc" id="agroup___t_h_r_e_a_d_s_html_ga06425285000fa305a3e9eb7d8affa32f"><div class="ttname"><a href="group___t_h_r_e_a_d_s.html#ga06425285000fa305a3e9eb7d8affa32f">new_thread_pool</a></div><div class="ttdeci">THREAD_POOL * new_thread_pool(size_t nbmaxthr, size_t nb_max_waiting)</div><div class="ttdoc">Create a new pool of nbmaxthr threads.</div><div class="ttdef"><b>Definition</b> <a href="n__thread__pool_8c_source.html#l00109">n_thread_pool.c:109</a></div></div>
<div class="ttc" id="agroup___t_h_r_e_a_d_s_html_ga8957711a73ec71ea58b28df71f4e1e0f"><div class="ttname"><a href="group___t_h_r_e_a_d_s.html#ga8957711a73ec71ea58b28df71f4e1e0f">get_nb_cpu_cores</a></div><div class="ttdeci">long int get_nb_cpu_cores()</div><div class="ttdoc">get number of core of current system</div><div class="ttdef"><b>Definition</b> <a href="n__thread__pool_8c_source.html#l00025">n_thread_pool.c:25</a></div></div>
<div class="ttc" id="agroup___t_h_r_e_a_d_s_html_struct_t_h_r_e_a_d___p_o_o_l"><div class="ttname"><a href="group___t_h_r_e_a_d_s.html#struct_t_h_r_e_a_d___p_o_o_l">THREAD_POOL</a></div><div class="ttdoc">Structure of a trhead pool.</div><div class="ttdef"><b>Definition</b> <a href="n__thread__pool_8h_source.html#l00076">n_thread_pool.h:76</a></div></div>
<div class="ttc" id="an__common_8h_html"><div class="ttname"><a href="n__common_8h.html">n_common.h</a></div><div class="ttdoc">Common headers and low-level hugly functions &amp; define.</div></div>
<div class="ttc" id="an__fluids_8h_html"><div class="ttname"><a href="n__fluids_8h.html">n_fluids.h</a></div><div class="ttdoc">fluid management port from &quot;How to write an Eulerian fluid simulator with 200 lines of code&quot;,...</div></div>
<div class="ttc" id="an__list_8h_html"><div class="ttname"><a href="n__list_8h.html">n_list.h</a></div><div class="ttdoc">List structures and definitions.</div></div>
<div class="ttc" id="an__log_8c_html_ab936051f5aaca44c6c3c41dee0d19c36"><div class="ttname"><a href="n__log_8c.html#ab936051f5aaca44c6c3c41dee0d19c36">log_file</a></div><div class="ttdeci">static FILE * log_file</div><div class="ttdoc">static FILE handling if logging to file is enabled</div><div class="ttdef"><b>Definition</b> <a href="n__log_8c_source.html#l00051">n_log.c:51</a></div></div>
<div class="ttc" id="an__log_8h_html"><div class="ttname"><a href="n__log_8h.html">n_log.h</a></div><div class="ttdoc">Generic log system.</div></div>
<div class="ttc" id="an__str_8h_html"><div class="ttname"><a href="n__str_8h.html">n_str.h</a></div><div class="ttdoc">N_STR and string function declaration.</div></div>
<div class="ttc" id="an__time_8h_html"><div class="ttname"><a href="n__time_8h.html">n_time.h</a></div><div class="ttdoc">Timing utilities.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 9 2025 19:56:05 for Nilorea Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
